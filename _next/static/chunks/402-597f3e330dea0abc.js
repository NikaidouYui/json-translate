"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[402],{21976:function(e,t){var n,r,o,s,i,a,l,c,u,d,h,f,p;t.SchemaType=void 0,(r=t.SchemaType||(t.SchemaType={})).STRING="string",r.NUMBER="number",r.INTEGER="integer",r.BOOLEAN="boolean",r.ARRAY="array",r.OBJECT="object",/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */t.ExecutableCodeLanguage=void 0,(o=t.ExecutableCodeLanguage||(t.ExecutableCodeLanguage={})).LANGUAGE_UNSPECIFIED="language_unspecified",o.PYTHON="python",t.Outcome=void 0,(s=t.Outcome||(t.Outcome={})).OUTCOME_UNSPECIFIED="outcome_unspecified",s.OUTCOME_OK="outcome_ok",s.OUTCOME_FAILED="outcome_failed",s.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m=["user","model","function","system"];t.HarmCategory=void 0,(i=t.HarmCategory||(t.HarmCategory={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HarmBlockThreshold=void 0,(a=t.HarmBlockThreshold||(t.HarmBlockThreshold={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE",t.HarmProbability=void 0,(l=t.HarmProbability||(t.HarmProbability={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",l.NEGLIGIBLE="NEGLIGIBLE",l.LOW="LOW",l.MEDIUM="MEDIUM",l.HIGH="HIGH",t.BlockReason=void 0,(c=t.BlockReason||(t.BlockReason={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",c.SAFETY="SAFETY",c.OTHER="OTHER",t.FinishReason=void 0,(u=t.FinishReason||(t.FinishReason={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",u.STOP="STOP",u.MAX_TOKENS="MAX_TOKENS",u.SAFETY="SAFETY",u.RECITATION="RECITATION",u.LANGUAGE="LANGUAGE",u.OTHER="OTHER",t.TaskType=void 0,(d=t.TaskType||(t.TaskType={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",d.RETRIEVAL_QUERY="RETRIEVAL_QUERY",d.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",d.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",d.CLASSIFICATION="CLASSIFICATION",d.CLUSTERING="CLUSTERING",t.FunctionCallingMode=void 0,(h=t.FunctionCallingMode||(t.FunctionCallingMode={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",h.AUTO="AUTO",h.ANY="ANY",h.NONE="NONE",t.DynamicRetrievalMode=void 0,(f=t.DynamicRetrievalMode||(t.DynamicRetrievalMode={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",f.MODE_DYNAMIC="MODE_DYNAMIC";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g extends Error{constructor(e){super("[GoogleGenerativeAI Error]: ".concat(e))}}class v extends g{constructor(e,t){super(e),this.response=t}}class y extends g{constructor(e,t,n,r){super(e),this.status=t,this.statusText=n,this.errorDetails=r}}class w extends g{}(p=n||(n={})).GENERATE_CONTENT="generateContent",p.STREAM_GENERATE_CONTENT="streamGenerateContent",p.COUNT_TOKENS="countTokens",p.EMBED_CONTENT="embedContent",p.BATCH_EMBED_CONTENTS="batchEmbedContents";class b{toString(){var e,t;let n=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta",r=(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com",o="".concat(r,"/").concat(n,"/").concat(this.model,":").concat(this.task);return this.stream&&(o+="?alt=sse"),o}constructor(e,t,n,r,o){this.model=e,this.task=t,this.apiKey=n,this.stream=r,this.requestOptions=o}}async function _(e){var t;let n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(e){let t=[];return(null==e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("".concat("genai-js","/").concat("0.21.0")),t.join(" ")}(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let r=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(e){throw new w("unable to convert customHeaders value ".concat(JSON.stringify(r)," to Headers: ").concat(e.message))}for(let[e,t]of r.entries()){if("x-goog-api-key"===e)throw new w("Cannot set reserved header name ".concat(e));if("x-goog-api-client"===e)throw new w("Header name ".concat(e," can only be set using the apiClient field"));n.append(e,t)}}return n}async function E(e,t,n,r,o,s){let i=new b(e,t,n,r,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},function(e){let t={};if((null==e?void 0:e.signal)!==void 0||(null==e?void 0:e.timeout)>=0){let n=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout(()=>n.abort(),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}(s)),{method:"POST",headers:await _(i),body:o})}}async function x(e,t,n,r,o){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fetch,{url:a,fetchOptions:l}=await E(e,t,n,r,o,s);return S(a,l,i)}async function S(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fetch;try{n=await r(e,t)}catch(t){!function(e,t){let n=e;throw e instanceof y||e instanceof w||((n=new g("Error fetching from ".concat(t.toString(),": ").concat(e.message))).stack=e.stack),n}(t,e)}return n.ok||await C(n,e),n}async function C(e,t){let n,r="";try{let t=await e.json();r=t.error.message,t.error.details&&(r+=" ".concat(JSON.stringify(t.error.details)),n=t.error.details)}catch(e){}throw new y("Error fetching from ".concat(t.toString(),": [").concat(e.status," ").concat(e.statusText,"] ").concat(r),e.status,e.statusText,n)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn("This response had ".concat(e.candidates.length," ")+"candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates."),O(e.candidates[0]))throw new v("".concat(T(e)),e);return function(e){var t,n,r,o;let s=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(let t of null===(o=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===o?void 0:o.parts)t.text&&s.push(t.text),t.executableCode&&s.push("\n```"+t.executableCode.language+"\n"+t.executableCode.code+"\n```\n"),t.codeExecutionResult&&s.push("\n```\n"+t.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}(e)}if(e.promptFeedback)throw new v("Text not available. ".concat(T(e)),e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn("This response had ".concat(e.candidates.length," ")+"candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates."),O(e.candidates[0]))throw new v("".concat(T(e)),e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),I(e)[0]}if(e.promptFeedback)throw new v("Function call not available. ".concat(T(e)),e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn("This response had ".concat(e.candidates.length," ")+"candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates."),O(e.candidates[0]))throw new v("".concat(T(e)),e);return I(e)}if(e.promptFeedback)throw new v("Function call not available. ".concat(T(e)),e)},e}function I(e){var t,n,r,o;let s=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(let t of null===(o=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===o?void 0:o.parts)t.functionCall&&s.push(t.functionCall);return s.length>0?s:void 0}let R=[t.FinishReason.RECITATION,t.FinishReason.SAFETY,t.FinishReason.LANGUAGE];function O(e){return!!e.finishReason&&R.includes(e.finishReason)}function T(e){var t,n,r;let o="";if((!e.candidates||0===e.candidates.length)&&e.promptFeedback)o+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(o+=" due to ".concat(e.promptFeedback.blockReason)),(null===(n=e.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(o+=": ".concat(e.promptFeedback.blockReasonMessage));else if(null===(r=e.candidates)||void 0===r?void 0:r[0]){let t=e.candidates[0];O(t)&&(o+="Candidate was blocked due to ".concat(t.finishReason),t.finishMessage&&(o+=": ".concat(t.finishMessage)))}return o}function M(e){return this instanceof M?(this.v=e,this):new M(e)}"function"==typeof SuppressedError&&SuppressedError;/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function P(e){let t=[],n=e.getReader();for(;;){let{done:e,value:r}=await n.read();if(e)return A(function(e){let t=e[e.length-1],n={promptFeedback:null==t?void 0:t.promptFeedback};for(let t of e){if(t.candidates)for(let e of t.candidates){let t=e.index;if(n.candidates||(n.candidates=[]),n.candidates[t]||(n.candidates[t]={index:e.index}),n.candidates[t].citationMetadata=e.citationMetadata,n.candidates[t].groundingMetadata=e.groundingMetadata,n.candidates[t].finishReason=e.finishReason,n.candidates[t].finishMessage=e.finishMessage,n.candidates[t].safetyRatings=e.safetyRatings,e.content&&e.content.parts){n.candidates[t].content||(n.candidates[t].content={role:e.content.role||"user",parts:[]});let r={};for(let o of e.content.parts)o.text&&(r.text=o.text),o.functionCall&&(r.functionCall=o.functionCall),o.executableCode&&(r.executableCode=o.executableCode),o.codeExecutionResult&&(r.codeExecutionResult=o.codeExecutionResult),0===Object.keys(r).length&&(r.text=""),n.candidates[t].content.parts.push(r)}}t.usageMetadata&&(n.usageMetadata=t.usageMetadata)}return n}(t));t.push(r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N(e,t,r,o){return function(e){let[t,n]=(function(e){let t=e.getReader();return new ReadableStream({start(e){let n="";return function r(){return t.read().then(t=>{let o,{value:s,done:i}=t;if(i){if(n.trim()){e.error(new g("Failed to parse stream"));return}e.close();return}let a=(n+=s).match(k);for(;a;){try{o=JSON.parse(a[1])}catch(t){e.error(new g('Error parsing JSON response: "'.concat(a[1],'"')));return}e.enqueue(o),a=(n=n.substring(a[0].length)).match(k)}return r()})}()}})})(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))).tee();return{stream:function(e){return function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),s=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){s.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{var n;(n=o[e](t)).value instanceof M?Promise.resolve(n.value.v).then(l,c):u(s[0][2],n)}catch(e){u(s[0][3],e)}}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){let t=e.getReader();for(;;){let{value:e,done:n}=yield M(t.read());if(n)break;yield yield M(A(e))}})}(t),response:P(n)}}(await x(t,n.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),o))}async function j(e,t,r,o){let s=await x(t,n.GENERATE_CONTENT,e,!1,JSON.stringify(r),o);return{response:A(await s.json())}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(e){if(null!=e){if("string"==typeof e)return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function D(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(let n of e)"string"==typeof n?t.push({text:n}):t.push(n);return function(e){let t={role:"user",parts:[]},n={role:"function",parts:[]},r=!1,o=!1;for(let s of e)"functionResponse"in s?(n.parts.push(s),o=!0):(t.parts.push(s),r=!0);if(r&&o)throw new g("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new g("No content is provided for sending chat message.");return r?t:n}(t)}function L(e){let t;return t=e.contents?e:{contents:[D(e)]},e.systemInstruction&&(t.systemInstruction=B(e.systemInstruction)),t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],U={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]},H="SILENT_ERROR";class W{async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var t,n,r,o,s,i;let a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await this._sendPromise;let c=D(e),u={safetySettings:null===(t=this.params)||void 0===t?void 0:t.safetySettings,generationConfig:null===(n=this.params)||void 0===n?void 0:n.generationConfig,tools:null===(r=this.params)||void 0===r?void 0:r.tools,toolConfig:null===(o=this.params)||void 0===o?void 0:o.toolConfig,systemInstruction:null===(s=this.params)||void 0===s?void 0:s.systemInstruction,cachedContent:null===(i=this.params)||void 0===i?void 0:i.cachedContent,contents:[...this._history,c]},d=Object.assign(Object.assign({},this._requestOptions),l);return this._sendPromise=this._sendPromise.then(()=>j(this._apiKey,this.model,u,d)).then(e=>{var t;if(e.response.candidates&&e.response.candidates.length>0){this._history.push(c);let n=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(n)}else{let t=T(e.response);t&&console.warn("sendMessage() was unsuccessful. ".concat(t,". Inspect response object for details."))}a=e}),await this._sendPromise,a}async sendMessageStream(e){var t,n,r,o,s,i;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await this._sendPromise;let l=D(e),c={safetySettings:null===(t=this.params)||void 0===t?void 0:t.safetySettings,generationConfig:null===(n=this.params)||void 0===n?void 0:n.generationConfig,tools:null===(r=this.params)||void 0===r?void 0:r.tools,toolConfig:null===(o=this.params)||void 0===o?void 0:o.toolConfig,systemInstruction:null===(s=this.params)||void 0===s?void 0:s.systemInstruction,cachedContent:null===(i=this.params)||void 0===i?void 0:i.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),a),d=N(this._apiKey,this.model,c,u);return this._sendPromise=this._sendPromise.then(()=>d).catch(e=>{throw Error(H)}).then(e=>e.response).then(e=>{if(e.candidates&&e.candidates.length>0){this._history.push(l);let t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{let t=T(e);t&&console.warn("sendMessageStream() was unsuccessful. ".concat(t,". Inspect response object for details."))}}).catch(e=>{e.message!==H&&console.error(e)}),d}constructor(e,t,n,r={}){this.model=t,this.params=n,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==n?void 0:n.history)&&(function(e){let t=!1;for(let n of e){let{role:e,parts:r}=n;if(!t&&"user"!==e)throw new g("First content should be with role 'user', got ".concat(e));if(!m.includes(e))throw new g("Each item should include role field. Got ".concat(e," but valid roles are: ").concat(JSON.stringify(m)));if(!Array.isArray(r))throw new g("Content should have 'parts' property with an array of Parts");if(0===r.length)throw new g("Each Content should have at least one part");let o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let e of r)for(let t of F)t in e&&(o[t]+=1);let s=U[e];for(let t of F)if(!s.includes(t)&&o[t]>0)throw new g("Content with role '".concat(e,"' can't contain '").concat(t,"' part"));t=!0}}(n.history),this._history=n.history)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q(e,t,r,o){return(await x(t,n.COUNT_TOKENS,e,!1,JSON.stringify(r),o)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V(e,t,r,o){return(await x(t,n.EMBED_CONTENT,e,!1,JSON.stringify(r),o)).json()}async function K(e,t,r,o){let s=r.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await x(t,n.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:s}),o)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{async generateContent(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=L(e),o=Object.assign(Object.assign({},this._requestOptions),n);return j(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},r),o)}async generateContentStream(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=L(e),o=Object.assign(Object.assign({},this._requestOptions),n);return N(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},r),o)}startChat(e){var t;return new W(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}async countTokens(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e,t){var n;let r={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null===(n=null==t?void 0:t.cachedContent)||void 0===n?void 0:n.name,contents:[]},o=null!=e.generateContentRequest;if(e.contents){if(o)throw new w("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(o)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{let t=D(e);r.contents=[t]}return{generateContentRequest:r}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return q(this.apiKey,this.model,n,r)}async embedContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="string"==typeof e||Array.isArray(e)?{content:D(e)}:e,r=Object.assign(Object.assign({},this._requestOptions),t);return V(this.apiKey,this.model,n,r)}async batchEmbedContents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign(Object.assign({},this._requestOptions),t);return K(this.apiKey,this.model,e,n)}constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model="models/".concat(t.model),this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=B(t.systemInstruction),this.cachedContent=t.cachedContent}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{getGenerativeModel(e,t){if(!e.model)throw new g("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new G(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new w("Cached content must contain a `name` field.");if(!e.model)throw new w("Cached content must contain a `model` field.");for(let n of["model","systemInstruction"])if((null==t?void 0:t[n])&&e[n]&&(null==t?void 0:t[n])!==e[n]){if("model"===n&&(t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue;throw new w('Different value for "'.concat(n,'" specified in modelParams')+" (".concat(t[n],") and cachedContent (").concat(e[n],")"))}let r=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new G(this.apiKey,r,n)}constructor(e){this.apiKey=e}}t.ChatSession=W,t.GenerativeModel=G,t.GoogleGenerativeAI=J,t.GoogleGenerativeAIError=g,t.GoogleGenerativeAIFetchError=y,t.GoogleGenerativeAIRequestInputError=w,t.GoogleGenerativeAIResponseError=v,t.POSSIBLE_ROLES=m},23441:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(57977).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},85159:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(57977).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},23416:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(57977).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},44715:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(57977).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},69074:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(57977).Z)("FileJson2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"fq0c9t"}],["path",{d:"M8 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"4gibmv"}]])},20933:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(57977).Z)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},29860:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(57977).Z)("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]])},79580:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(57977).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},70094:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(57977).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},18727:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(57977).Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},66806:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(57977).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},10632:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(57977).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},24232:function(e,t,n){n.d(t,{default:function(){return o.a}});var r=n(24930),o=n.n(r)},49079:function(e,t,n){var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(13127)},8620:function(e){!function(){var t={675:function(e,t){t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return(n+r)*3/4-r},t.toByteArray=function(e){var t,n,s=l(e),i=s[0],a=s[1],c=new o((i+a)*3/4-a),u=0,d=a>0?i-4:i;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[u++]=255&t),1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,s=[],i=0,a=r-o;i<a;i+=16383)s.push(function(e,t,r){for(var o,s=[],i=t;i<r;i+=3)s.push(n[(o=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]))>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}(e,i,i+16383>a?a:i+16383));return 1===o?s.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===o&&s.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),s.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=s.length;i<a;++i)n[i]=s[i],r[s.charCodeAt(i)]=i;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},72:function(e,t,n){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var r=n(675),o=n(783),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function i(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!a.isEncoding(t))throw TypeError("Unknown encoding: "+t);var n=0|f(e,t),r=i(n),o=r.write(e,t);return o!==n&&(r=r.slice(0,o)),r}(e,t);if(ArrayBuffer.isView(e))return d(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(O(e,ArrayBuffer)||e&&O(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(O(e,SharedArrayBuffer)||e&&O(e.buffer,SharedArrayBuffer)))return function(e,t,n){var r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),a.prototype),r}(e,t,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var o=function(e){if(a.isBuffer(e)){var t,n=0|h(e.length),r=i(n);return 0===r.length||e.copy(r,0,0,n),r}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?i(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),i(e<0?0:0|h(e))}function d(e){for(var t=e.length<0?0:0|h(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||O(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return C(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return I(e).length;default:if(o)return r?-1:C(e).length;t=(""+t).toLowerCase(),o=!0}}function p(e,t,n){var o,s,i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",s=t;s<n;++s)o+=T[e[s]];return o}(this,t,n);case"utf8":case"utf-8":return y(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}(this,t,n);case"base64":return o=t,s=n,0===o&&s===this.length?r.fromByteArray(this):r.fromByteArray(this.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),o="",s=0;s<r.length;s+=2)o+=String.fromCharCode(r[s]+256*r[s+1]);return o}(this,t,n);default:if(i)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,o){var s;if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),(s=n=+n)!=s&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return -1;n=e.length-1}else if(n<0){if(!o)return -1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,o);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,o);throw TypeError("val must be string, number or Buffer")}function v(e,t,n,r,o){var s,i=1,a=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;i=2,a/=2,l/=2,n/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var u=-1;for(s=n;s<a;s++)if(c(e,s)===c(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===l)return u*i}else -1!==u&&(s-=s-u),u=-1}else for(n+l>a&&(n=a-l),s=n;s>=0;s--){for(var d=!0,h=0;h<l;h++)if(c(e,s+h)!==c(t,h)){d=!1;break}if(d)return s}return -1}function y(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var s,i,a,l,c=e[o],u=null,d=c>239?4:c>223?3:c>191?2:1;if(o+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:(192&(s=e[o+1]))==128&&(l=(31&c)<<6|63&s)>127&&(u=l);break;case 3:s=e[o+1],i=e[o+2],(192&s)==128&&(192&i)==128&&(l=(15&c)<<12|(63&s)<<6|63&i)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[o+1],i=e[o+2],a=e[o+3],(192&s)==128&&(192&i)==128&&(192&a)==128&&(l=(15&c)<<18|(63&s)<<12|(63&i)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),o+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}function w(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function b(e,t,n,r,o,s){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw RangeError('"value" argument is out of bounds');if(n+r>e.length)throw RangeError("Index out of range")}function _(e,t,n,r,o,s){if(n+r>e.length||n<0)throw RangeError("Index out of range")}function E(e,t,n,r,s){return t=+t,n>>>=0,s||_(e,t,n,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,n,r,23,4),n+4}function x(e,t,n,r,s){return t=+t,n>>>=0,s||_(e,t,n,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,n,r,52,8),n+8}t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=2147483647,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return(c(e),e<=0)?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)},a.allocUnsafe=function(e){return u(e)},a.allocUnsafeSlow=function(e){return u(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(O(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),O(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,o=0,s=Math.min(n,r);o<s;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(n=0,t=0;n<e.length;++n)t+=e[n].length;var n,r=a.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var s=e[n];if(O(s,Uint8Array)&&(s=a.from(s)),!a.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?y(this,0,e):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,o){if(O(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return -1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var s=o-r,i=n-t,l=Math.min(s,i),c=this.slice(r,o),u=e.slice(t,n),d=0;d<l;++d)if(c[d]!==u[d]){s=c[d],i=u[d];break}return s<i?-1:i<s?1:0},a.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o,s,i,a,l,c,u,d,h,f,p,m,g=this.length-t;if((void 0===n||n>g)&&(n=g),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var v=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var s=t.length;r>s/2&&(r=s/2);for(var i=0;i<r;++i){var a=parseInt(t.substr(2*i,2),16);if(a!=a)break;e[n+i]=a}return i}(this,e,t,n);case"utf8":case"utf-8":return l=t,c=n,R(C(e,this.length-l),this,l,c);case"ascii":return u=t,d=n,R(A(e),this,u,d);case"latin1":case"binary":return o=this,s=e,i=t,a=n,R(A(s),o,i,a);case"base64":return h=t,f=n,R(I(e),this,h,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p=t,m=n,R(function(e,t){for(var n,r,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,o.push(n%256),o.push(r);return o}(e,this.length-p),this,p,m);default:if(v)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),v=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||w(e,t,this.length);for(var r=this[e],o=1,s=0;++s<t&&(o*=256);)r+=this[e+s]*o;return r},a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||w(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},a.prototype.readUInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||w(e,t,this.length);for(var r=this[e],o=1,s=0;++s<t&&(o*=256);)r+=this[e+s]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||w(e,t,this.length);for(var r=t,o=1,s=this[e+--r];r>0&&(o*=256);)s+=this[e+--r]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*t)),s},a.prototype.readInt8=function(e,t){return(e>>>=0,t||w(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||w(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||w(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||w(e,4,this.length),o.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||w(e,4,this.length),o.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||w(e,8,this.length),o.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||w(e,8,this.length),o.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var o=Math.pow(2,8*n)-1;b(this,e,t,n,o,0)}var s=1,i=0;for(this[t]=255&e;++i<n&&(s*=256);)this[t+i]=e/s&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var o=Math.pow(2,8*n)-1;b(this,e,t,n,o,0)}var s=n-1,i=1;for(this[t+s]=255&e;--s>=0&&(i*=256);)this[t+s]=e/i&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);b(this,e,t,n,o-1,-o)}var s=0,i=1,a=0;for(this[t]=255&e;++s<n&&(i*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);b(this,e,t,n,o-1,-o)}var s=n-1,i=1,a=0;for(this[t+s]=255&e;--s>=0&&(i*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,n){return E(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return E(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return x(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return x(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var s=o-1;s>=0;--s)e[s+t]=this[s+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){var o,s=e.charCodeAt(0);("utf8"===r&&s<128||"latin1"===r)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var i=a.isBuffer(e)?e:a.from(e,r),l=i.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=i[o%l]}return this};var S=/[^+/0-9A-Za-z-_]/g;function C(e,t){t=t||1/0;for(var n,r=e.length,o=null,s=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!o){if(n>56319||i+1===r){(t-=3)>-1&&s.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return s}function A(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function I(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function R(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length)&&!(o>=e.length);++o)t[o+n]=e[o];return o}function O(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var T=function(){for(var e="0123456789abcdef",t=Array(256),n=0;n<16;++n)for(var r=16*n,o=0;o<16;++o)t[r+o]=e[n]+e[o];return t}()},783:function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(e,t,n,r,o){var s,i,a=8*o-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?o-1:0,h=n?-1:1,f=e[t+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+e[t+d],d+=h,u-=8);for(i=s&(1<<-u)-1,s>>=-u,u+=r;u>0;i=256*i+e[t+d],d+=h,u-=8);if(0===s)s=1-c;else{if(s===l)return i?NaN:1/0*(f?-1:1);i+=Math.pow(2,r),s-=c}return(f?-1:1)*i*Math.pow(2,s-r)},t.write=function(e,t,n,r,o,s){var i,a,l,c=8*s-o-1,u=(1<<c)-1,d=u>>1,h=23===o?5960464477539062e-23:0,f=r?0:s-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(a=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+d>=1?t+=h/l:t+=h*Math.pow(2,1-d),t*l>=2&&(i++,l/=2),i+d>=u?(a=0,i=u):i+d>=1?(a=(t*l-1)*Math.pow(2,o),i+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),i=0));o>=8;e[n+f]=255&a,f+=p,a/=256,o-=8);for(i=i<<o|a,c+=o;c>0;e[n+f]=255&i,f+=p,i/=256,c-=8);e[n+f-p]|=128*m}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var s=n[e]={exports:{}},i=!0;try{t[e](s,s.exports,r),i=!1}finally{i&&delete n[e]}return s.exports}r.ab="//";var o=r(72);e.exports=o}()},13127:function(e){!function(){var t={229:function(e){var t,n,r,o=e.exports={};function s(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var l=[],c=!1,u=-1;function d(){c&&r&&(c=!1,r.length?l=r.concat(l):u=-1,l.length&&h())}function h(){if(!c){var e=a(d);c=!0;for(var t=l.length;t;){for(r=l,l=[];++u<t;)r&&r[u].run();u=-1,t=l.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||c||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var s=n[e]={exports:{}},i=!0;try{t[e](s,s.exports,r),i=!1}finally{i&&delete n[e]}return s.exports}r.ab="//";var o=r(229);e.exports=o}()},24930:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let r=n(84096);n(3827),n(64090);let o=r._(n(84795));function s(e,t){let n={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};return"function"==typeof e&&(n.loader=e),(0,o.default)({...n,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},19721:function(e,t,n){function r(e){let{reason:t,children:n}=e;return n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),n(99775)},84795:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let r=n(3827),o=n(64090),s=n(19721);function i(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let a={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},l=function(e){let t={...a,...e},n=(0,o.lazy)(()=>t.loader().then(i)),l=t.loading;function c(e){let i=l?(0,r.jsx)(l,{isLoading:!0,pastDelay:!0,error:null}):null,a=t.ssr?(0,r.jsx)(n,{...e}):(0,r.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(o.Suspense,{fallback:i,children:a})}return c.displayName="LoadableComponent",c}},12275:function(e,t,n){n.d(t,{gm:function(){return s}});var r=n(64090);n(3827);var o=r.createContext(void 0);function s(e){let t=r.useContext(o);return e||t||"ltr"}},37827:function(e,t,n){n.d(t,{fC:function(){return b},z$:function(){return _}});var r=n(64090),o=n(84104),s=n(29586),i=n(3827),a="Progress",[l,c]=(0,o.b)(a),[u,d]=l(a),h=r.forwardRef((e,t)=>{var n,r;let{__scopeProgress:o,value:a=null,max:l,getValueLabel:c=m,...d}=e;(l||0===l)&&!y(l)&&console.error((n="".concat(l),"Invalid prop `max` of value `".concat(n,"` supplied to `").concat("Progress","`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let h=y(l)?l:100;null===a||w(a,h)||console.error((r="".concat(a),"Invalid prop `value` of value `".concat(r,"` supplied to `").concat("Progress","`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let f=w(a,h)?a:null,p=v(f)?c(f,h):void 0;return(0,i.jsx)(u,{scope:o,value:f,max:h,children:(0,i.jsx)(s.WV.div,{"aria-valuemax":h,"aria-valuemin":0,"aria-valuenow":v(f)?f:void 0,"aria-valuetext":p,role:"progressbar","data-state":g(f,h),"data-value":null!=f?f:void 0,"data-max":h,...d,ref:t})})});h.displayName=a;var f="ProgressIndicator",p=r.forwardRef((e,t)=>{var n;let{__scopeProgress:r,...o}=e,a=d(f,r);return(0,i.jsx)(s.WV.div,{"data-state":g(a.value,a.max),"data-value":null!==(n=a.value)&&void 0!==n?n:void 0,"data-max":a.max,...o,ref:t})});function m(e,t){return"".concat(Math.round(e/t*100),"%")}function g(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function v(e){return"number"==typeof e}function y(e){return v(e)&&!isNaN(e)&&e>0}function w(e,t){return v(e)&&!isNaN(e)&&e<=t&&e>=0}p.displayName=f;var b=h,_=p},58161:function(e,t,n){n.d(t,{VY:function(){return eP},ZA:function(){return ej},JO:function(){return eM},ck:function(){return eD},wU:function(){return eF},eT:function(){return eL},__:function(){return eB},h_:function(){return ek},fC:function(){return eR},$G:function(){return eH},u_:function(){return eU},Z0:function(){return eW},xz:function(){return eO},B4:function(){return eT},l_:function(){return eN}});var r=n(64090),o=n(89542);function s(e,t){let[n,r]=t;return Math.min(r,Math.max(n,e))}var i=n(44991),a=n(27533),l=n(61266),c=n(84104),u=n(12275),d=n(1260),h=n(46165),f=n(78082),p=n(38687),m=n(25341),g=n(37881),v=n(29586),y=n(59143),w=n(39830),b=n(9310),_=n(32618),E=n(11780),x=n(66674),S=n(47225),C=n(3827),A=[" ","Enter","ArrowUp","ArrowDown"],I=[" ","Enter"],R="Select",[O,T,M]=(0,a.B)(R),[k,P]=(0,c.b)(R,[M,m.D7]),N=(0,m.D7)(),[j,B]=k(R),[D,L]=k(R),F=e=>{let{__scopeSelect:t,children:n,open:o,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:g,required:v,form:y}=e,w=N(t),[_,E]=r.useState(null),[x,S]=r.useState(null),[A,I]=r.useState(!1),R=(0,u.gm)(d),[T=!1,M]=(0,b.T)({prop:o,defaultProp:s,onChange:i}),[k,P]=(0,b.T)({prop:a,defaultProp:l,onChange:c}),B=r.useRef(null),L=!_||y||!!_.closest("form"),[F,U]=r.useState(new Set),H=Array.from(F).map(e=>e.props.value).join(";");return(0,C.jsx)(m.fC,{...w,children:(0,C.jsxs)(j,{required:v,scope:t,trigger:_,onTriggerChange:E,valueNode:x,onValueNodeChange:S,valueNodeHasChildren:A,onValueNodeHasChildrenChange:I,contentId:(0,p.M)(),value:k,onValueChange:P,open:T,onOpenChange:M,dir:R,triggerPointerDownPosRef:B,disabled:g,children:[(0,C.jsx)(O.Provider,{scope:t,children:(0,C.jsx)(D,{scope:e.__scopeSelect,onNativeOptionAdd:r.useCallback(e=>{U(t=>new Set(t).add(e))},[]),onNativeOptionRemove:r.useCallback(e=>{U(t=>{let n=new Set(t);return n.delete(e),n})},[]),children:n})}),L?(0,C.jsxs)(eC,{"aria-hidden":!0,required:v,tabIndex:-1,name:h,autoComplete:f,value:k,onChange:e=>P(e.target.value),disabled:g,form:y,children:[void 0===k?(0,C.jsx)("option",{value:""}):null,Array.from(F)]},H):null]})})};F.displayName=R;var U="SelectTrigger",H=r.forwardRef((e,t)=>{let{__scopeSelect:n,disabled:o=!1,...s}=e,a=N(n),c=B(U,n),u=c.disabled||o,d=(0,l.e)(t,c.onTriggerChange),h=T(n),f=r.useRef("touch"),[p,g,y]=eA(e=>{let t=h().filter(e=>!e.disabled),n=t.find(e=>e.value===c.value),r=eI(t,e,n);void 0!==r&&c.onValueChange(r.value)}),w=e=>{u||(c.onOpenChange(!0),y()),e&&(c.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,C.jsx)(m.ee,{asChild:!0,...a,children:(0,C.jsx)(v.WV.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":eS(c.value)?"":void 0,...s,ref:d,onClick:(0,i.M)(s.onClick,e=>{e.currentTarget.focus(),"mouse"!==f.current&&w(e)}),onPointerDown:(0,i.M)(s.onPointerDown,e=>{f.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(w(e),e.preventDefault())}),onKeyDown:(0,i.M)(s.onKeyDown,e=>{let t=""!==p.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||g(e.key),(!t||" "!==e.key)&&A.includes(e.key)&&(w(),e.preventDefault())})})})});H.displayName=U;var W="SelectValue",q=r.forwardRef((e,t)=>{let{__scopeSelect:n,className:r,style:o,children:s,placeholder:i="",...a}=e,c=B(W,n),{onValueNodeHasChildrenChange:u}=c,d=void 0!==s,h=(0,l.e)(t,c.onValueNodeChange);return(0,_.b)(()=>{u(d)},[u,d]),(0,C.jsx)(v.WV.span,{...a,ref:h,style:{pointerEvents:"none"},children:eS(c.value)?(0,C.jsx)(C.Fragment,{children:i}):s})});q.displayName=W;var V=r.forwardRef((e,t)=>{let{__scopeSelect:n,children:r,...o}=e;return(0,C.jsx)(v.WV.span,{"aria-hidden":!0,...o,ref:t,children:r||""})});V.displayName="SelectIcon";var K=e=>(0,C.jsx)(g.h,{asChild:!0,...e});K.displayName="SelectPortal";var G="SelectContent",J=r.forwardRef((e,t)=>{let n=B(G,e.__scopeSelect),[s,i]=r.useState();return((0,_.b)(()=>{i(new DocumentFragment)},[]),n.open)?(0,C.jsx)(z,{...e,ref:t}):s?o.createPortal((0,C.jsx)(X,{scope:e.__scopeSelect,children:(0,C.jsx)(O.Slot,{scope:e.__scopeSelect,children:(0,C.jsx)("div",{children:e.children})})}),s):null});J.displayName=G;var[X,Y]=k(G),z=r.forwardRef((e,t)=>{let{__scopeSelect:n,position:o="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:c,side:u,sideOffset:p,align:m,alignOffset:g,arrowPadding:v,collisionBoundary:w,collisionPadding:b,sticky:_,hideWhenDetached:E,avoidCollisions:A,...I}=e,R=B(G,n),[O,M]=r.useState(null),[k,P]=r.useState(null),N=(0,l.e)(t,e=>M(e)),[j,D]=r.useState(null),[L,F]=r.useState(null),U=T(n),[H,W]=r.useState(!1),q=r.useRef(!1);r.useEffect(()=>{if(O)return(0,x.Ry)(O)},[O]),(0,h.EW)();let V=r.useCallback(e=>{let[t,...n]=U().map(e=>e.ref.current),[r]=n.slice(-1),o=document.activeElement;for(let n of e)if(n===o||(null==n||n.scrollIntoView({block:"nearest"}),n===t&&k&&(k.scrollTop=0),n===r&&k&&(k.scrollTop=k.scrollHeight),null==n||n.focus(),document.activeElement!==o))return},[U,k]),K=r.useCallback(()=>V([j,O]),[V,j,O]);r.useEffect(()=>{H&&K()},[H,K]);let{onOpenChange:J,triggerPointerDownPosRef:Y}=R;r.useEffect(()=>{if(O){let e={x:0,y:0},t=t=>{var n,r,o,s;e={x:Math.abs(Math.round(t.pageX)-(null!==(o=null===(n=Y.current)||void 0===n?void 0:n.x)&&void 0!==o?o:0)),y:Math.abs(Math.round(t.pageY)-(null!==(s=null===(r=Y.current)||void 0===r?void 0:r.y)&&void 0!==s?s:0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():O.contains(n.target)||J(!1),document.removeEventListener("pointermove",t),Y.current=null};return null!==Y.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[O,J,Y]),r.useEffect(()=>{let e=()=>J(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[J]);let[z,$]=eA(e=>{let t=U().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),r=eI(t,e,n);r&&setTimeout(()=>r.ref.current.focus())}),ee=r.useCallback((e,t,n)=>{let r=!q.current&&!n;(void 0!==R.value&&R.value===t||r)&&(D(e),r&&(q.current=!0))},[R.value]),et=r.useCallback(()=>null==O?void 0:O.focus(),[O]),en=r.useCallback((e,t,n)=>{let r=!q.current&&!n;(void 0!==R.value&&R.value===t||r)&&F(e)},[R.value]),er="popper"===o?Q:Z,eo=er===Q?{side:u,sideOffset:p,align:m,alignOffset:g,arrowPadding:v,collisionBoundary:w,collisionPadding:b,sticky:_,hideWhenDetached:E,avoidCollisions:A}:{};return(0,C.jsx)(X,{scope:n,content:O,viewport:k,onViewportChange:P,itemRefCallback:ee,selectedItem:j,onItemLeave:et,itemTextRefCallback:en,focusSelectedItem:K,selectedItemText:L,position:o,isPositioned:H,searchRef:z,children:(0,C.jsx)(S.Z,{as:y.g7,allowPinchZoom:!0,children:(0,C.jsx)(f.M,{asChild:!0,trapped:R.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,i.M)(s,e=>{var t;null===(t=R.trigger)||void 0===t||t.focus({preventScroll:!0}),e.preventDefault()}),children:(0,C.jsx)(d.XB,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>R.onOpenChange(!1),children:(0,C.jsx)(er,{role:"listbox",id:R.contentId,"data-state":R.open?"open":"closed",dir:R.dir,onContextMenu:e=>e.preventDefault(),...I,...eo,onPlaced:()=>W(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...I.style},onKeyDown:(0,i.M)(I.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||$(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=U().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>V(t)),e.preventDefault()}})})})})})})});z.displayName="SelectContentImpl";var Z=r.forwardRef((e,t)=>{let{__scopeSelect:n,onPlaced:o,...i}=e,a=B(G,n),c=Y(G,n),[u,d]=r.useState(null),[h,f]=r.useState(null),p=(0,l.e)(t,e=>f(e)),m=T(n),g=r.useRef(!1),y=r.useRef(!0),{viewport:w,selectedItem:b,selectedItemText:E,focusSelectedItem:x}=c,S=r.useCallback(()=>{if(a.trigger&&a.valueNode&&u&&h&&w&&b&&E){let e=a.trigger.getBoundingClientRect(),t=h.getBoundingClientRect(),n=a.valueNode.getBoundingClientRect(),r=E.getBoundingClientRect();if("rtl"!==a.dir){let o=r.left-t.left,i=n.left-o,a=e.left-i,l=e.width+a,c=Math.max(l,t.width),d=s(i,[10,Math.max(10,window.innerWidth-10-c)]);u.style.minWidth=l+"px",u.style.left=d+"px"}else{let o=t.right-r.right,i=window.innerWidth-n.right-o,a=window.innerWidth-e.right-i,l=e.width+a,c=Math.max(l,t.width),d=s(i,[10,Math.max(10,window.innerWidth-10-c)]);u.style.minWidth=l+"px",u.style.right=d+"px"}let i=m(),l=window.innerHeight-20,c=w.scrollHeight,d=window.getComputedStyle(h),f=parseInt(d.borderTopWidth,10),p=parseInt(d.paddingTop,10),v=parseInt(d.borderBottomWidth,10),y=f+p+c+parseInt(d.paddingBottom,10)+v,_=Math.min(5*b.offsetHeight,y),x=window.getComputedStyle(w),S=parseInt(x.paddingTop,10),C=parseInt(x.paddingBottom,10),A=e.top+e.height/2-10,I=b.offsetHeight/2,R=f+p+(b.offsetTop+I);if(R<=A){let e=i.length>0&&b===i[i.length-1].ref.current;u.style.bottom="0px";let t=h.clientHeight-w.offsetTop-w.offsetHeight;u.style.height=R+Math.max(l-A,I+(e?C:0)+t+v)+"px"}else{let e=i.length>0&&b===i[0].ref.current;u.style.top="0px";let t=Math.max(A,f+w.offsetTop+(e?S:0)+I);u.style.height=t+(y-R)+"px",w.scrollTop=R-A+w.offsetTop}u.style.margin="".concat(10,"px 0"),u.style.minHeight=_+"px",u.style.maxHeight=l+"px",null==o||o(),requestAnimationFrame(()=>g.current=!0)}},[m,a.trigger,a.valueNode,u,h,w,b,E,a.dir,o]);(0,_.b)(()=>S(),[S]);let[A,I]=r.useState();(0,_.b)(()=>{h&&I(window.getComputedStyle(h).zIndex)},[h]);let R=r.useCallback(e=>{e&&!0===y.current&&(S(),null==x||x(),y.current=!1)},[S,x]);return(0,C.jsx)($,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:g,onScrollButtonChange:R,children:(0,C.jsx)("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:(0,C.jsx)(v.WV.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Z.displayName="SelectItemAlignedPosition";var Q=r.forwardRef((e,t)=>{let{__scopeSelect:n,align:r="start",collisionPadding:o=10,...s}=e,i=N(n);return(0,C.jsx)(m.VY,{...i,...s,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Q.displayName="SelectPopperPosition";var[$,ee]=k(G,{}),et="SelectViewport",en=r.forwardRef((e,t)=>{let{__scopeSelect:n,nonce:o,...s}=e,a=Y(et,n),c=ee(et,n),u=(0,l.e)(t,a.onViewportChange),d=r.useRef(0);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),(0,C.jsx)(O.Slot,{scope:n,children:(0,C.jsx)(v.WV.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:(0,i.M)(s.onScroll,e=>{let t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=c;if((null==r?void 0:r.current)&&n){let e=Math.abs(d.current-t.scrollTop);if(e>0){let r=window.innerHeight-20,o=Math.max(parseFloat(n.style.minHeight),parseFloat(n.style.height));if(o<r){let s=o+e,i=Math.min(r,s),a=s-i;n.style.height=i+"px","0px"===n.style.bottom&&(t.scrollTop=a>0?a:0,n.style.justifyContent="flex-end")}}}d.current=t.scrollTop})})})]})});en.displayName=et;var er="SelectGroup",[eo,es]=k(er),ei=r.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e,o=(0,p.M)();return(0,C.jsx)(eo,{scope:n,id:o,children:(0,C.jsx)(v.WV.div,{role:"group","aria-labelledby":o,...r,ref:t})})});ei.displayName=er;var ea="SelectLabel",el=r.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e,o=es(ea,n);return(0,C.jsx)(v.WV.div,{id:o.id,...r,ref:t})});el.displayName=ea;var ec="SelectItem",[eu,ed]=k(ec),eh=r.forwardRef((e,t)=>{let{__scopeSelect:n,value:o,disabled:s=!1,textValue:a,...c}=e,u=B(ec,n),d=Y(ec,n),h=u.value===o,[f,m]=r.useState(null!=a?a:""),[g,y]=r.useState(!1),w=(0,l.e)(t,e=>{var t;return null===(t=d.itemRefCallback)||void 0===t?void 0:t.call(d,e,o,s)}),b=(0,p.M)(),_=r.useRef("touch"),E=()=>{s||(u.onValueChange(o),u.onOpenChange(!1))};if(""===o)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,C.jsx)(eu,{scope:n,value:o,disabled:s,textId:b,isSelected:h,onItemTextChange:r.useCallback(e=>{m(t=>{var n;return t||(null!==(n=null==e?void 0:e.textContent)&&void 0!==n?n:"").trim()})},[]),children:(0,C.jsx)(O.ItemSlot,{scope:n,value:o,disabled:s,textValue:f,children:(0,C.jsx)(v.WV.div,{role:"option","aria-labelledby":b,"data-highlighted":g?"":void 0,"aria-selected":h&&g,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:w,onFocus:(0,i.M)(c.onFocus,()=>y(!0)),onBlur:(0,i.M)(c.onBlur,()=>y(!1)),onClick:(0,i.M)(c.onClick,()=>{"mouse"!==_.current&&E()}),onPointerUp:(0,i.M)(c.onPointerUp,()=>{"mouse"===_.current&&E()}),onPointerDown:(0,i.M)(c.onPointerDown,e=>{_.current=e.pointerType}),onPointerMove:(0,i.M)(c.onPointerMove,e=>{if(_.current=e.pointerType,s){var t;null===(t=d.onItemLeave)||void 0===t||t.call(d)}else"mouse"===_.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,i.M)(c.onPointerLeave,e=>{if(e.currentTarget===document.activeElement){var t;null===(t=d.onItemLeave)||void 0===t||t.call(d)}}),onKeyDown:(0,i.M)(c.onKeyDown,e=>{var t;(null===(t=d.searchRef)||void 0===t?void 0:t.current)!==""&&" "===e.key||(I.includes(e.key)&&E()," "===e.key&&e.preventDefault())})})})})});eh.displayName=ec;var ef="SelectItemText",ep=r.forwardRef((e,t)=>{let{__scopeSelect:n,className:s,style:i,...a}=e,c=B(ef,n),u=Y(ef,n),d=ed(ef,n),h=L(ef,n),[f,p]=r.useState(null),m=(0,l.e)(t,e=>p(e),d.onItemTextChange,e=>{var t;return null===(t=u.itemTextRefCallback)||void 0===t?void 0:t.call(u,e,d.value,d.disabled)}),g=null==f?void 0:f.textContent,y=r.useMemo(()=>(0,C.jsx)("option",{value:d.value,disabled:d.disabled,children:g},d.value),[d.disabled,d.value,g]),{onNativeOptionAdd:w,onNativeOptionRemove:b}=h;return(0,_.b)(()=>(w(y),()=>b(y)),[w,b,y]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(v.WV.span,{id:d.textId,...a,ref:m}),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?o.createPortal(a.children,c.valueNode):null]})});ep.displayName=ef;var em="SelectItemIndicator",eg=r.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e;return ed(em,n).isSelected?(0,C.jsx)(v.WV.span,{"aria-hidden":!0,...r,ref:t}):null});eg.displayName=em;var ev="SelectScrollUpButton",ey=r.forwardRef((e,t)=>{let n=Y(ev,e.__scopeSelect),o=ee(ev,e.__scopeSelect),[s,i]=r.useState(!1),a=(0,l.e)(t,o.onScrollButtonChange);return(0,_.b)(()=>{if(n.viewport&&n.isPositioned){let e=function(){i(t.scrollTop>0)},t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),s?(0,C.jsx)(e_,{...e,ref:a,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});ey.displayName=ev;var ew="SelectScrollDownButton",eb=r.forwardRef((e,t)=>{let n=Y(ew,e.__scopeSelect),o=ee(ew,e.__scopeSelect),[s,i]=r.useState(!1),a=(0,l.e)(t,o.onScrollButtonChange);return(0,_.b)(()=>{if(n.viewport&&n.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;i(Math.ceil(t.scrollTop)<e)},t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),s?(0,C.jsx)(e_,{...e,ref:a,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});eb.displayName=ew;var e_=r.forwardRef((e,t)=>{let{__scopeSelect:n,onAutoScroll:o,...s}=e,a=Y("SelectScrollButton",n),l=r.useRef(null),c=T(n),u=r.useCallback(()=>{null!==l.current&&(window.clearInterval(l.current),l.current=null)},[]);return r.useEffect(()=>()=>u(),[u]),(0,_.b)(()=>{var e;let t=c().find(e=>e.ref.current===document.activeElement);null==t||null===(e=t.ref.current)||void 0===e||e.scrollIntoView({block:"nearest"})},[c]),(0,C.jsx)(v.WV.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:(0,i.M)(s.onPointerDown,()=>{null===l.current&&(l.current=window.setInterval(o,50))}),onPointerMove:(0,i.M)(s.onPointerMove,()=>{var e;null===(e=a.onItemLeave)||void 0===e||e.call(a),null===l.current&&(l.current=window.setInterval(o,50))}),onPointerLeave:(0,i.M)(s.onPointerLeave,()=>{u()})})}),eE=r.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e;return(0,C.jsx)(v.WV.div,{"aria-hidden":!0,...r,ref:t})});eE.displayName="SelectSeparator";var ex="SelectArrow";function eS(e){return""===e||void 0===e}r.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e,o=N(n),s=B(ex,n),i=Y(ex,n);return s.open&&"popper"===i.position?(0,C.jsx)(m.Eh,{...o,...r,ref:t}):null}).displayName=ex;var eC=r.forwardRef((e,t)=>{let{value:n,...o}=e,s=r.useRef(null),i=(0,l.e)(t,s),a=function(e){let t=r.useRef({value:e,previous:e});return r.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(n);return r.useEffect(()=>{let e=s.current,t=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(a!==n&&t){let r=new Event("change",{bubbles:!0});t.call(e,n),e.dispatchEvent(r)}},[a,n]),(0,C.jsx)(E.T,{asChild:!0,children:(0,C.jsx)("select",{...o,ref:i,defaultValue:n})})});function eA(e){let t=(0,w.W)(e),n=r.useRef(""),o=r.useRef(0),s=r.useCallback(e=>{let r=n.current+e;t(r),function e(t){n.current=t,window.clearTimeout(o.current),""!==t&&(o.current=window.setTimeout(()=>e(""),1e3))}(r)},[t]),i=r.useCallback(()=>{n.current="",window.clearTimeout(o.current)},[]);return r.useEffect(()=>()=>window.clearTimeout(o.current),[]),[n,s,i]}function eI(e,t,n){var r;let o=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,s=(r=Math.max(n?e.indexOf(n):-1,0),e.map((t,n)=>e[(r+n)%e.length]));1===o.length&&(s=s.filter(e=>e!==n));let i=s.find(e=>e.textValue.toLowerCase().startsWith(o.toLowerCase()));return i!==n?i:void 0}eC.displayName="BubbleSelect";var eR=F,eO=H,eT=q,eM=V,ek=K,eP=J,eN=en,ej=ei,eB=el,eD=eh,eL=ep,eF=eg,eU=ey,eH=eb,eW=eE},31552:function(e,t,n){n.d(t,{VY:function(){return Y},aV:function(){return J},fC:function(){return G},xz:function(){return X}});var r=n(64090),o=n(44991),s=n(84104),i=n(27533),a=n(61266),l=n(38687),c=n(29586),u=n(39830),d=n(9310),h=n(12275),f=n(3827),p="rovingFocusGroup.onEntryFocus",m={bubbles:!1,cancelable:!0},g="RovingFocusGroup",[v,y,w]=(0,i.B)(g),[b,_]=(0,s.b)(g,[w]),[E,x]=b(g),S=r.forwardRef((e,t)=>(0,f.jsx)(v.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,f.jsx)(v.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,f.jsx)(C,{...e,ref:t})})}));S.displayName=g;var C=r.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,orientation:s,loop:i=!1,dir:l,currentTabStopId:g,defaultCurrentTabStopId:v,onCurrentTabStopIdChange:w,onEntryFocus:b,preventScrollOnEntryFocus:_=!1,...x}=e,S=r.useRef(null),C=(0,a.e)(t,S),A=(0,h.gm)(l),[I=null,R]=(0,d.T)({prop:g,defaultProp:v,onChange:w}),[T,M]=r.useState(!1),k=(0,u.W)(b),P=y(n),N=r.useRef(!1),[j,B]=r.useState(0);return r.useEffect(()=>{let e=S.current;if(e)return e.addEventListener(p,k),()=>e.removeEventListener(p,k)},[k]),(0,f.jsx)(E,{scope:n,orientation:s,dir:A,loop:i,currentTabStopId:I,onItemFocus:r.useCallback(e=>R(e),[R]),onItemShiftTab:r.useCallback(()=>M(!0),[]),onFocusableItemAdd:r.useCallback(()=>B(e=>e+1),[]),onFocusableItemRemove:r.useCallback(()=>B(e=>e-1),[]),children:(0,f.jsx)(c.WV.div,{tabIndex:T||0===j?-1:0,"data-orientation":s,...x,ref:C,style:{outline:"none",...e.style},onMouseDown:(0,o.M)(e.onMouseDown,()=>{N.current=!0}),onFocus:(0,o.M)(e.onFocus,e=>{let t=!N.current;if(e.target===e.currentTarget&&t&&!T){let t=new CustomEvent(p,m);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=P().filter(e=>e.focusable);O([e.find(e=>e.active),e.find(e=>e.id===I),...e].filter(Boolean).map(e=>e.ref.current),_)}}N.current=!1}),onBlur:(0,o.M)(e.onBlur,()=>M(!1))})})}),A="RovingFocusGroupItem",I=r.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,focusable:s=!0,active:i=!1,tabStopId:a,...u}=e,d=(0,l.M)(),h=a||d,p=x(A,n),m=p.currentTabStopId===h,g=y(n),{onFocusableItemAdd:w,onFocusableItemRemove:b}=p;return r.useEffect(()=>{if(s)return w(),()=>b()},[s,w,b]),(0,f.jsx)(v.ItemSlot,{scope:n,id:h,focusable:s,active:i,children:(0,f.jsx)(c.WV.span,{tabIndex:m?0:-1,"data-orientation":p.orientation,...u,ref:t,onMouseDown:(0,o.M)(e.onMouseDown,e=>{s?p.onItemFocus(h):e.preventDefault()}),onFocus:(0,o.M)(e.onFocus,()=>p.onItemFocus(h)),onKeyDown:(0,o.M)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){p.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,n){var r;let o=(r=e.key,"rtl"!==n?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(o))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(o)))return R[o]}(e,p.orientation,p.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let o=g().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)o.reverse();else if("prev"===t||"next"===t){var n,r;"prev"===t&&o.reverse();let s=o.indexOf(e.currentTarget);o=p.loop?(n=o,r=s+1,n.map((e,t)=>n[(r+t)%n.length])):o.slice(s+1)}setTimeout(()=>O(o))}})})})});I.displayName=A;var R={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function O(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.activeElement;for(let r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}var T=n(12642),M="Tabs",[k,P]=(0,s.b)(M,[_]),N=_(),[j,B]=k(M),D=r.forwardRef((e,t)=>{let{__scopeTabs:n,value:r,onValueChange:o,defaultValue:s,orientation:i="horizontal",dir:a,activationMode:u="automatic",...p}=e,m=(0,h.gm)(a),[g,v]=(0,d.T)({prop:r,onChange:o,defaultProp:s});return(0,f.jsx)(j,{scope:n,baseId:(0,l.M)(),value:g,onValueChange:v,orientation:i,dir:m,activationMode:u,children:(0,f.jsx)(c.WV.div,{dir:m,"data-orientation":i,...p,ref:t})})});D.displayName=M;var L="TabsList",F=r.forwardRef((e,t)=>{let{__scopeTabs:n,loop:r=!0,...o}=e,s=B(L,n),i=N(n);return(0,f.jsx)(S,{asChild:!0,...i,orientation:s.orientation,dir:s.dir,loop:r,children:(0,f.jsx)(c.WV.div,{role:"tablist","aria-orientation":s.orientation,...o,ref:t})})});F.displayName=L;var U="TabsTrigger",H=r.forwardRef((e,t)=>{let{__scopeTabs:n,value:r,disabled:s=!1,...i}=e,a=B(U,n),l=N(n),u=V(a.baseId,r),d=K(a.baseId,r),h=r===a.value;return(0,f.jsx)(I,{asChild:!0,...l,focusable:!s,active:h,children:(0,f.jsx)(c.WV.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...i,ref:t,onMouseDown:(0,o.M)(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():a.onValueChange(r)}),onKeyDown:(0,o.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&a.onValueChange(r)}),onFocus:(0,o.M)(e.onFocus,()=>{let e="manual"!==a.activationMode;h||s||!e||a.onValueChange(r)})})})});H.displayName=U;var W="TabsContent",q=r.forwardRef((e,t)=>{let{__scopeTabs:n,value:o,forceMount:s,children:i,...a}=e,l=B(W,n),u=V(l.baseId,o),d=K(l.baseId,o),h=o===l.value,p=r.useRef(h);return r.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,f.jsx)(T.z,{present:s||h,children:n=>{let{present:r}=n;return(0,f.jsx)(c.WV.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!r,id:d,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:r&&i})}})});function V(e,t){return"".concat(e,"-trigger-").concat(t)}function K(e,t){return"".concat(e,"-content-").concat(t)}q.displayName=W;var G=D,J=F,X=H,Y=q},94442:function(e,t,n){let r,o,s,i,a,l,c,u,d,h;n.d(t,{ZP:function(){return nJ}});let f="RFC3986",p={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)};Object.prototype.hasOwnProperty;let m=Array.isArray,g=(()=>{let e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})();function v(e,t){if(m(e)){let n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}let y=Object.prototype.hasOwnProperty,w={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},b=Array.isArray,_=Array.prototype.push,E=function(e,t){_.apply(e,b(t)?t:[t])},x=Date.prototype.toISOString,S={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(e,t,n,r,o)=>{if(0===e.length)return e;let s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===n)return escape(s).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let i="";for(let e=0;e<s.length;e+=1024){let t=s.length>=1024?s.slice(e,e+1024):s,n=[];for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(45===r||46===r||95===r||126===r||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||"RFC1738"===o&&(40===r||41===r)){n[n.length]=t.charAt(e);continue}if(r<128){n[n.length]=g[r];continue}if(r<2048){n[n.length]=g[192|r>>6]+g[128|63&r];continue}if(r<55296||r>=57344){n[n.length]=g[224|r>>12]+g[128|r>>6&63]+g[128|63&r];continue}e+=1,r=65536+((1023&r)<<10|1023&t.charCodeAt(e)),n[n.length]=g[240|r>>18]+g[128|r>>12&63]+g[128|r>>6&63]+g[128|63&r]}i+=n.join("")}return i},encodeValuesOnly:!1,format:f,formatter:p[f],indices:!1,serializeDate:e=>x.call(e),skipNulls:!1,strictNullHandling:!1},C={},A="4.72.0",I=!1;class R{get[Symbol.toStringTag](){return"MultipartBody"}constructor(e){this.body=e}}o||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{auto:!1};if(I)throw Error("you must `import 'openai/shims/".concat(e.kind,"'` before importing anything else from openai"));if(o)throw Error("can't `import 'openai/shims/".concat(e.kind,"'` after `import 'openai/shims/").concat(o,"'`"));I=t.auto,o=e.kind,s=e.fetch,e.Request,e.Response,e.Headers,i=e.FormData,e.Blob,a=e.File,l=e.ReadableStream,c=e.getMultipartRequestOptions,u=e.getDefaultAgent,d=e.fileFromPath,h=e.isFsReadStream}(function(){let e,t,n,r,{manuallyImported:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=o?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";try{e=fetch,t=Request,n=Response,r=Headers}catch(e){throw Error("this environment is missing the following Web Fetch API type: ".concat(e.message,". ").concat(s))}return{kind:"web",fetch:e,Request:t,Response:n,Headers:r,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw Error("file uploads aren't supported in this environment yet as 'FormData' is undefined. ".concat(s))}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw Error("file uploads aren't supported in this environment yet as 'Blob' is undefined. ".concat(s))}},File:"undefined"!=typeof File?File:class{constructor(){throw Error("file uploads aren't supported in this environment yet as 'File' is undefined. ".concat(s))}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw Error("streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ".concat(s))}},getMultipartRequestOptions:async(e,t)=>({...t,body:new R(e)}),getDefaultAgent:e=>void 0,fileFromPath:()=>{throw Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0});class O extends Error{}class T extends O{static makeMessage(e,t,n){let r=(null==t?void 0:t.message)?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?"".concat(e," ").concat(r):e?"".concat(e," status code (no body)"):r||"(no status code or body)"}static generate(e,t,n,r){if(!e)return new k({message:n,cause:tI(t)});let o=null==t?void 0:t.error;return 400===e?new N(e,o,n,r):401===e?new j(e,o,n,r):403===e?new B(e,o,n,r):404===e?new D(e,o,n,r):409===e?new L(e,o,n,r):422===e?new F(e,o,n,r):429===e?new U(e,o,n,r):e>=500?new H(e,o,n,r):new T(e,o,n,r)}constructor(e,t,n,r){super("".concat(T.makeMessage(e,t,n))),this.status=e,this.headers=r,this.request_id=null==r?void 0:r["x-request-id"],this.error=t,this.code=null==t?void 0:t.code,this.param=null==t?void 0:t.param,this.type=null==t?void 0:t.type}}class M extends T{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class k extends T{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class P extends k{constructor({message:e}={}){super({message:null!=e?e:"Request timed out."})}}class N extends T{constructor(){super(...arguments),this.status=400}}class j extends T{constructor(){super(...arguments),this.status=401}}class B extends T{constructor(){super(...arguments),this.status=403}}class D extends T{constructor(){super(...arguments),this.status=404}}class L extends T{constructor(){super(...arguments),this.status=409}}class F extends T{constructor(){super(...arguments),this.status=422}}class U extends T{constructor(){super(...arguments),this.status=429}}class H extends T{}class W extends O{constructor(){super("Could not parse response content as the length limit was reached")}}class q extends O{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var V,K,G,J,X,Y,z,Z,Q,$,ee,et,en,er,eo,es,ei,ea,el,ec,eu,ed,eh,ef,ep,em,eg,ev,ey,ew,eb,e_,eE,ex,eS,eC,eA,eI,eR,eO,eT,eM,ek,eP,eN,ej,eB,eD,eL,eF,eU,eH,eW,eq,eV,eK,eG,eJ,eX=n(8620).Buffer;class eY{decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];let n=eY.NEWLINE_CHARS.has(t[t.length-1]||""),r=t.split(eY.NEWLINE_REGEXP);return(n&&r.pop(),1!==r.length||n)?(this.buffer.length>0&&(r=[this.buffer.join("")+r[0],...r.slice(1)],this.buffer=[]),n||(this.buffer=[r.pop()||""]),r):(this.buffer.push(r[0]),[])}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if(void 0!==eX){if(e instanceof eX)return e.toString();if(e instanceof Uint8Array)return eX.from(e).toString();throw new O("Unexpected: received non-Uint8Array (".concat(e.constructor.name,') stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.'))}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer){var t;return null!==(t=this.textDecoder)&&void 0!==t||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e)}throw new O("Unexpected: received non-Uint8Array/ArrayBuffer (".concat(e.constructor.name,") in a web platform. Please report this error."))}throw new O("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];let e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}constructor(){this.buffer=[],this.trailingCR=!1}}eY.NEWLINE_CHARS=new Set(["\n","\r"]),eY.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class ez{static fromSSEResponse(e,t){let n=!1;return new ez(async function*(){if(n)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(let n of eZ(e,t))if(!r){if(n.data.startsWith("[DONE]")){r=!0;continue}if(null===n.event){let e;try{e=JSON.parse(n.data)}catch(e){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),e}if(e&&e.error)throw new T(void 0,e.error,void 0,void 0);yield e}else{let e;try{e=JSON.parse(n.data)}catch(e){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),e}if("error"==n.event)throw new T(void 0,e.error,e.message,void 0);yield{event:n.event,data:e}}}r=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{r||t.abort()}},t)}static fromReadableStream(e,t){let n=!1;async function*r(){let t=new eY;for await(let n of e0(e))for(let e of t.decode(n))yield e;for(let e of t.flush())yield e}return new ez(async function*(){if(n)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let e=!1;try{for await(let t of r())!e&&t&&(yield JSON.parse(t));e=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{e||t.abort()}},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){let r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new ez(()=>r(e),this.controller),new ez(()=>r(t),this.controller)]}toReadableStream(){let e;let t=this,n=new TextEncoder;return new l({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:r,done:o}=await e.next();if(o)return t.close();let s=n.encode(JSON.stringify(r)+"\n");t.enqueue(s)}catch(e){t.error(e)}},async cancel(){var t;await (null===(t=e.return)||void 0===t?void 0:t.call(e))}})}constructor(e,t){this.iterator=e,this.controller=t}}async function*eZ(e,t){if(!e.body)throw t.abort(),new O("Attempted to iterate over a response with no body");let n=new e$,r=new eY;for await(let t of eQ(e0(e.body)))for(let e of r.decode(t)){let t=n.decode(e);t&&(yield t)}for(let e of r.flush()){let t=n.decode(e);t&&(yield t)}}async function*eQ(e){let t=new Uint8Array;for await(let n of e){let e;if(null==n)continue;let r=n instanceof ArrayBuffer?new Uint8Array(n):"string"==typeof n?new TextEncoder().encode(n):n,o=new Uint8Array(t.length+r.length);for(o.set(t),o.set(r,t.length),t=o;-1!==(e=function(e){for(let t=0;t<e.length-2;t++){if(10===e[t]&&10===e[t+1]||13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return -1}(t));)yield t.slice(0,e),t=t.slice(e)}t.length>0&&(yield t)}class e${decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e,t){let n=e.indexOf(t);return -1!==n?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}(e,":");return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}constructor(){this.event=null,this.data=[],this.chunks=[]}}function e0(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return(null==e?void 0:e.done)&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}var e1=n(8620).Buffer;let e2=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,e6=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&e5(e),e5=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,e8=e=>e6(e)||e2(e)||h(e);async function e4(e,t,n){var r,o,s,i,l;if(e6(e=await e))return e;if(e2(e)){let o=await e.blob();t||(t=null!==(r=new URL(e.url).pathname.split(/[\\/]/).pop())&&void 0!==r?r:"unknown_file");let s=e5(o)?[await o.arrayBuffer()]:[o];return new a(s,t,n)}let c=await e3(e);if(t||(t=null!==(o=e7((i=e).name)||e7(i.filename)||(null===(l=e7(i.path))||void 0===l?void 0:l.split(/[\\/]/).pop()))&&void 0!==o?o:"unknown_file"),!(null==n?void 0:n.type)){let e=null===(s=c[0])||void 0===s?void 0:s.type;"string"==typeof e&&(n={...n,type:e})}return new a(c,t,n)}async function e3(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(e5(e))t.push(await e.arrayBuffer());else if(e9(e))for await(let n of e)t.push(n);else{var n;throw Error("Unexpected data type: ".concat(typeof e,"; constructor: ").concat(null==e?void 0:null===(n=e.constructor)||void 0===n?void 0:n.name,"; props: ").concat(function(e){let t=Object.getOwnPropertyNames(e);return"[".concat(t.map(e=>'"'.concat(e,'"')).join(", "),"]")}(e)))}return t}let e7=e=>"string"==typeof e?e:void 0!==e1&&e instanceof e1?String(e):void 0,e9=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],te=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],tt=async e=>{let t=await tn(e.body);return c(t,e)},tn=async e=>{let t=new i;return await Promise.all(Object.entries(e||{}).map(e=>{let[n,r]=e;return to(t,n,r)})),t},tr=e=>{if(e8(e))return!0;if(Array.isArray(e))return e.some(tr);if(e&&"object"==typeof e){for(let t in e)if(tr(e[t]))return!0}return!1},to=async(e,t,n)=>{if(void 0!==n){if(null==n)throw TypeError('Received null for "'.concat(t,"\"; to pass null in FormData, you must use the string 'null'"));if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)e.append(t,String(n));else if(e8(n)){let r=await e4(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(n=>to(e,t+"[]",n)));else if("object"==typeof n)await Promise.all(Object.entries(n).map(n=>{let[r,o]=n;return to(e,"".concat(t,"[").concat(r,"]"),o)}));else throw TypeError("Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ".concat(n," instead"))}};var ts=n(8620).Buffer,ti=n(49079),ta=function(e,t,n,r,o){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},tl=function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};async function tc(e){let{response:t}=e;if(e.options.stream)return(tk("response",t.status,t.url,t.headers,t.body),e.options.__streamClass)?e.options.__streamClass.fromSSEResponse(t,e.controller):ez.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;let n=t.headers.get("content-type");if((null==n?void 0:n.includes("application/json"))||(null==n?void 0:n.includes("application/vnd.api+json"))){let e=await t.json();return tk("response",t.status,t.url,t.headers,e),tu(e,t)}let r=await t.text();return tk("response",t.status,t.url,t.headers,r),r}function tu(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class td extends Promise{_thenUnwrap(e){return new td(this.responsePromise,async t=>tu(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}constructor(e,t=tc){super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}}class th{authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...t_(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return"stainless-node-retry-".concat(tP())}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async n=>{let r=n&&e5(null==n?void 0:n.body)?new DataView(await n.body.arrayBuffer()):(null==n?void 0:n.body)instanceof DataView?n.body:(null==n?void 0:n.body)instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(null==n?void 0:n.body)?new DataView(n.body.buffer):null==n?void 0:n.body;return{method:e,path:t,...n,body:r}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if("string"==typeof e){if(void 0!==ts)return ts.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder)return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e){var t,n,r,o,s,i;let{retryCount:a=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:l,path:c,query:d,headers:h={}}=e,f=ArrayBuffer.isView(e.body)||e.__binaryRequest&&"string"==typeof e.body?e.body:te(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,p=this.calculateContentLength(f),m=this.buildURL(c,d);"timeout"in e&&tA("timeout",e.timeout);let g=null!==(n=e.timeout)&&void 0!==n?n:this.timeout,v=null!==(o=null!==(r=e.httpAgent)&&void 0!==r?r:this.httpAgent)&&void 0!==o?o:u(m),y=g+1e3;"number"==typeof(null==v?void 0:null===(t=v.options)||void 0===t?void 0:t.timeout)&&y>(null!==(s=v.options.timeout)&&void 0!==s?s:0)&&(v.options.timeout=y),this.idempotencyHeader&&"get"!==l&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),h[this.idempotencyHeader]=e.idempotencyKey);let w=this.buildHeaders({options:e,headers:h,contentLength:p,retryCount:a});return{req:{method:l,...f&&{body:f},headers:w,...v&&{agent:v},signal:null!==(i=e.signal)&&void 0!==i?i:null},url:m,timeout:g}}buildHeaders(e){let{options:t,headers:n,contentLength:r,retryCount:s}=e,i={};r&&(i["content-length"]=r);let a=this.defaultHeaders(t);return tM(i,a),tM(i,n),te(t.body)&&"node"!==o&&delete i["content-type"],void 0===tB(a,"x-stainless-retry-count")&&void 0===tB(n,"x-stainless-retry-count")&&(i["x-stainless-retry-count"]=String(s)),this.validateHeaders(i,n),i}async prepareOptions(e){}async prepareRequest(e,t){let{url:n,options:r}=t}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,n,r){return T.generate(e,t,n,r)}request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new td(this.makeRequest(e,t))}async makeRequest(e,t){var n,r,o;let s=await e,i=null!==(r=s.maxRetries)&&void 0!==r?r:this.maxRetries;null==t&&(t=i),await this.prepareOptions(s);let{req:a,url:l,timeout:c}=this.buildRequest(s,{retryCount:i-t});if(await this.prepareRequest(a,{url:l,options:s}),tk("request",l,s,a.headers),null===(n=s.signal)||void 0===n?void 0:n.aborted)throw new M;let u=new AbortController,d=await this.fetchWithTimeout(l,a,c,u).catch(tI);if(d instanceof Error){if(null===(o=s.signal)||void 0===o?void 0:o.aborted)throw new M;if(t)return this.retryRequest(s,t);if("AbortError"===d.name)throw new P;throw new k({cause:d})}let h=tm(d.headers);if(!d.ok){if(t&&this.shouldRetry(d)){let e="retrying, ".concat(t," attempts remaining");return tk("response (error; ".concat(e,")"),d.status,l,h),this.retryRequest(s,t,h)}let e=await d.text().catch(e=>tI(e).message),n=tE(e),r=n?void 0:e,o=t?"(error; no more retries left)":"(error; not retryable)";throw tk("response (error; ".concat(o,")"),d.status,l,h,r),this.makeStatusError(d.status,n,r,h)}return{response:d,options:s,controller:u}}requestAPIList(e,t){return new tp(this,this.makeRequest(t,null),e)}buildURL(e,t){let n=new URL(tS(e)?e:this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return tO(r)||(t={...r,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n));if(null===n)return"".concat(encodeURIComponent(t),"=");throw new O("Cannot stringify type ".concat(typeof n,"; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case."))}).join("&")}async fetchWithTimeout(e,t,n,r){let{signal:o,...s}=t||{};o&&o.addEventListener("abort",()=>r.abort());let i=setTimeout(()=>r.abort(),n);return this.getRequestClient().fetch.call(void 0,e,{signal:r.signal,...s}).finally(()=>{clearTimeout(i)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,n){let r;let o=null==n?void 0:n["retry-after-ms"];if(o){let e=parseFloat(o);Number.isNaN(e)||(r=e)}let s=null==n?void 0:n["retry-after"];if(s&&!r){let e=parseFloat(s);r=Number.isNaN(e)?Date.parse(s)-Date.now():1e3*e}if(!(r&&0<=r&&r<6e4)){var i;let n=null!==(i=e.maxRetries)&&void 0!==i?i:this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,n)}return await tC(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}getUserAgent(){return"".concat(this.constructor.name,"/JS ").concat(A)}constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:r,fetch:o}){this.baseURL=e,this.maxRetries=tA("maxRetries",t),this.timeout=tA("timeout",n),this.httpAgent=r,this.fetch=null!=o?o:s}}class tf{hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){let e=this.nextPageInfo();if(!e)throw new O("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");let t={...this.options};if("params"in e&&"object"==typeof t.query)t.query={...t.query,...e.params};else if("url"in e){for(let[n,r]of[...Object.entries(t.query||{}),...e.url.searchParams.entries()])e.url.searchParams.set(n,r);t.query=void 0,t.path=e.url.toString()}return await tl(this,V,"f").requestAPIList(this.constructor,t)}async *iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async *[(V=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}constructor(e,t,n,r){V.set(this,void 0),ta(this,V,e,"f"),this.options=r,this.response=t,this.body=n}}class tp extends td{async *[Symbol.asyncIterator](){for await(let e of(await this))yield e}constructor(e,t,n){super(t,async t=>new n(e,t.response,await tc(t),t.options))}}let tm=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){let n=t.toString();return e[n.toLowerCase()]||e[n]}}),tg={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},tv=e=>"object"==typeof e&&null!==e&&!tO(e)&&Object.keys(e).every(e=>tT(tg,e)),ty=()=>{if("undefined"!=typeof Deno&&null!=Deno.build){var e,t;return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":A,"X-Stainless-OS":tb(Deno.build.os),"X-Stainless-Arch":tw(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:null!==(t=null===(e=Deno.version)||void 0===e?void 0:e.deno)&&void 0!==t?t:"unknown"}}if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":A,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"other:".concat(EdgeRuntime),"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":ti.version};if("[object process]"===Object.prototype.toString.call(void 0!==ti?ti:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":A,"X-Stainless-OS":tb(ti.platform),"X-Stainless-Arch":tw(ti.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":ti.version};let n=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:e,pattern:t}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let n=t.exec(navigator.userAgent);if(n){let t=n[1]||0,r=n[2]||0,o=n[3]||0;return{browser:e,version:"".concat(t,".").concat(r,".").concat(o)}}}return null}();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":A,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"browser:".concat(n.browser),"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":A,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},tw=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?"other:".concat(e):"unknown",tb=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?"Other:".concat(e):"Unknown",t_=()=>null!=r?r:r=ty(),tE=e=>{try{return JSON.parse(e)}catch(e){return}},tx=RegExp("^(?:[a-z]+:)?//","i"),tS=e=>tx.test(e),tC=e=>new Promise(t=>setTimeout(t,e)),tA=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new O("".concat(e," must be an integer"));if(t<0)throw new O("".concat(e," must be a positive integer"));return t},tI=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e)try{return Error(JSON.stringify(e))}catch(e){}return Error(e)},tR=e=>{var t,n,r,o,s,i;return void 0!==ti?null!==(r=null===(n=ti.env)||void 0===n?void 0:null===(t=n[e])||void 0===t?void 0:t.trim())&&void 0!==r?r:void 0:"undefined"!=typeof Deno?null===(i=Deno.env)||void 0===i?void 0:null===(s=i.get)||void 0===s?void 0:null===(o=s.call(i,e))||void 0===o?void 0:o.trim():void 0};function tO(e){if(!e)return!0;for(let t in e)return!1;return!0}function tT(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function tM(e,t){for(let n in t){if(!tT(t,n))continue;let r=n.toLowerCase();if(!r)continue;let o=t[n];null===o?delete e[r]:void 0!==o&&(e[r]=o)}}function tk(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];void 0!==ti&&(null==ti?void 0:null===(t=ti.env)||void 0===t?void 0:t.DEBUG)==="true"&&console.log("OpenAI:DEBUG:".concat(e),...r)}let tP=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),tN=()=>void 0!==window.document&&"undefined"!=typeof navigator,tj=e=>"function"==typeof(null==e?void 0:e.get),tB=(e,t)=>{let n=t.toLowerCase();if(tj(e)){var r;let o=(null===(r=t[0])||void 0===r?void 0:r.toUpperCase())+t.substring(1).replace(/([^\w])(\w)/g,(e,t,n)=>t+n.toUpperCase());for(let r of[t,n,t.toUpperCase(),o]){let t=e.get(r);if(t)return t}}for(let[r,o]of Object.entries(e))if(r.toLowerCase()===n){if(Array.isArray(o)){if(o.length<=1)return o[0];return console.warn("Received ".concat(o.length," entries for the ").concat(t," header, using the first entry.")),o[0]}return o}};function tD(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}class tL{constructor(e){this._client=e}}class tF extends tL{create(e,t){var n;return this._client.post("/completions",{body:e,...t,stream:null!==(n=e.stream)&&void 0!==n&&n})}}class tU extends tL{create(e,t){var n;return this._client.post("/chat/completions",{body:e,...t,stream:null!==(n=e.stream)&&void 0!==n&&n})}}class tH extends tL{constructor(){super(...arguments),this.completions=new tU(this._client)}}tH.Completions=tU;class tW extends tL{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}class tq extends tf{getPaginatedItems(){var e;return null!==(e=this.data)&&void 0!==e?e:[]}nextPageParams(){return null}nextPageInfo(){return null}constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}}class tV extends tf{getPaginatedItems(){var e;return null!==(e=this.data)&&void 0!==e?e:[]}nextPageParams(){let e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;let t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var e;let t=this.getPaginatedItems();if(!t.length)return null;let n=null===(e=t[t.length-1])||void 0===e?void 0:e.id;return n?{params:{after:n}}:null}constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[]}}class tK extends tL{create(e,t){return this._client.post("/files",tt({body:e,...t}))}retrieve(e,t){return this._client.get("/files/".concat(e),t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return tv(e)?this.list({},e):this._client.getAPIList("/files",tG,{query:e,...t})}del(e,t){return this._client.delete("/files/".concat(e),t)}content(e,t){return this._client.get("/files/".concat(e,"/content"),{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get("/files/".concat(e,"/content"),{...t,headers:{Accept:"application/json",...null==t?void 0:t.headers}})}async waitForProcessing(e){let{pollInterval:t=5e3,maxWait:n=18e5}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Set(["processed","error","deleted"]),o=Date.now(),s=await this.retrieve(e);for(;!s.status||!r.has(s.status);)if(await tC(t),s=await this.retrieve(e),Date.now()-o>n)throw new P({message:"Giving up on waiting for file ".concat(e," to finish processing after ").concat(n," milliseconds.")});return s}}class tG extends tV{}tK.FileObjectsPage=tG;class tJ extends tL{createVariation(e,t){return this._client.post("/images/variations",tt({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",tt({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class tX extends tL{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}class tY extends tL{create(e,t){return this._client.post("/audio/transcriptions",tt({body:e,...t}))}}class tz extends tL{create(e,t){return this._client.post("/audio/translations",tt({body:e,...t}))}}class tZ extends tL{constructor(){super(...arguments),this.transcriptions=new tY(this._client),this.translations=new tz(this._client),this.speech=new tX(this._client)}}tZ.Transcriptions=tY,tZ.Translations=tz,tZ.Speech=tX;class tQ extends tL{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class t$ extends tL{retrieve(e,t){return this._client.get("/models/".concat(e),t)}list(e){return this._client.getAPIList("/models",t0,e)}del(e,t){return this._client.delete("/models/".concat(e),t)}}class t0 extends tq{}t$.ModelsPage=t0;class t1 extends tL{list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return tv(t)?this.list(e,{},t):this._client.getAPIList("/fine_tuning/jobs/".concat(e,"/checkpoints"),t2,{query:t,...n})}}class t2 extends tV{}t1.FineTuningJobCheckpointsPage=t2;class t6 extends tL{create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get("/fine_tuning/jobs/".concat(e),t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return tv(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",t5,{query:e,...t})}cancel(e,t){return this._client.post("/fine_tuning/jobs/".concat(e,"/cancel"),t)}listEvents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return tv(t)?this.listEvents(e,{},t):this._client.getAPIList("/fine_tuning/jobs/".concat(e,"/events"),t8,{query:t,...n})}constructor(){super(...arguments),this.checkpoints=new t1(this._client)}}class t5 extends tV{}class t8 extends tV{}t6.FineTuningJobsPage=t5,t6.FineTuningJobEventsPage=t8,t6.Checkpoints=t1,t6.FineTuningJobCheckpointsPage=t2;class t4 extends tL{constructor(){super(...arguments),this.jobs=new t6(this._client)}}t4.Jobs=t6,t4.FineTuningJobsPage=t5,t4.FineTuningJobEventsPage=t8;class t3 extends tL{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}retrieve(e,t){return this._client.get("/assistants/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}update(e,t,n){return this._client.post("/assistants/".concat(e),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return tv(e)?this.list({},e):this._client.getAPIList("/assistants",t7,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}del(e,t){return this._client.delete("/assistants/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}}class t7 extends tV{}function t9(e){return"function"==typeof e.parse}t3.AssistantsPage=t7;let ne=e=>(null==e?void 0:e.role)==="assistant",nt=e=>(null==e?void 0:e.role)==="function",nn=e=>(null==e?void 0:e.role)==="tool";var nr=function(e,t,n,r,o){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},no=function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class ns{_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},no(this,K,"m",er).bind(this))},0)}_connected(){this.ended||(no(this,J,"f").call(this),this._emit("connect"))}get ended(){return no(this,$,"f")}get errored(){return no(this,ee,"f")}get aborted(){return no(this,et,"f")}abort(){this.controller.abort()}on(e,t){return(no(this,Q,"f")[e]||(no(this,Q,"f")[e]=[])).push({listener:t}),this}off(e,t){let n=no(this,Q,"f")[e];if(!n)return this;let r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(no(this,Q,"f")[e]||(no(this,Q,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{nr(this,en,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){nr(this,en,!0,"f"),await no(this,Y,"f")}_emit(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(no(this,$,"f"))return;"end"===e&&(nr(this,$,!0,"f"),no(this,z,"f").call(this));let o=no(this,Q,"f")[e];if(o&&(no(this,Q,"f")[e]=o.filter(e=>!e.once),o.forEach(e=>{let{listener:t}=e;return t(...n)})),"abort"===e){let e=n[0];no(this,en,"f")||(null==o?void 0:o.length)||Promise.reject(e),no(this,X,"f").call(this,e),no(this,Z,"f").call(this,e),this._emit("end");return}if("error"===e){let e=n[0];no(this,en,"f")||(null==o?void 0:o.length)||Promise.reject(e),no(this,X,"f").call(this,e),no(this,Z,"f").call(this,e),this._emit("end")}}_emitFinal(){}constructor(){K.add(this),this.controller=new AbortController,G.set(this,void 0),J.set(this,()=>{}),X.set(this,()=>{}),Y.set(this,void 0),z.set(this,()=>{}),Z.set(this,()=>{}),Q.set(this,{}),$.set(this,!1),ee.set(this,!1),et.set(this,!1),en.set(this,!1),nr(this,G,new Promise((e,t)=>{nr(this,J,e,"f"),nr(this,X,t,"f")}),"f"),nr(this,Y,new Promise((e,t)=>{nr(this,z,e,"f"),nr(this,Z,t,"f")}),"f"),no(this,G,"f").catch(()=>{}),no(this,Y,"f").catch(()=>{})}}function ni(e){return(null==e?void 0:e.$brand)==="auto-parseable-response-format"}function na(e){return(null==e?void 0:e.$brand)==="auto-parseable-tool"}function nl(e,t){let n=e.choices.map(e=>{var n,r,o,s,i;if("length"===e.finish_reason)throw new W;if("content_filter"===e.finish_reason)throw new q;return{...e,message:{...e.message,tool_calls:null!==(r=null===(n=e.message.tool_calls)||void 0===n?void 0:n.map(e=>(function(e,t){var n;let r=null===(n=e.tools)||void 0===n?void 0:n.find(e=>{var n;return(null===(n=e.function)||void 0===n?void 0:n.name)===t.function.name});return{...t,function:{...t.function,parsed_arguments:na(r)?r.$parseRaw(t.function.arguments):(null==r?void 0:r.function.strict)?JSON.parse(t.function.arguments):null}}})(t,e)))&&void 0!==r?r:[],parsed:e.message.content&&!e.message.refusal?(o=e.message.content,(null===(s=t.response_format)||void 0===s?void 0:s.type)!=="json_schema"?null:(null===(i=t.response_format)||void 0===i?void 0:i.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(o):JSON.parse(o):null):null}}});return{...e,choices:n}}function nc(e){var t,n;return!!ni(e.response_format)||null!==(n=null===(t=e.tools)||void 0===t?void 0:t.some(e=>na(e)||"function"===e.type&&!0===e.function.strict))&&void 0!==n&&n}G=new WeakMap,J=new WeakMap,X=new WeakMap,Y=new WeakMap,z=new WeakMap,Z=new WeakMap,Q=new WeakMap,$=new WeakMap,ee=new WeakMap,et=new WeakMap,en=new WeakMap,K=new WeakSet,er=function(e){if(nr(this,ee,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new M),e instanceof M)return nr(this,et,!0,"f"),this._emit("abort",e);if(e instanceof O)return this._emit("error",e);if(e instanceof Error){let t=new O(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new O(String(e)))};var nu=function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class nd extends ns{_addChatCompletion(e){var t;this._chatCompletions.push(e),this._emit("chatCompletion",e);let n=null===(t=e.choices[0])||void 0===t?void 0:t.message;return n&&this._addMessage(n),e}_addMessage(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(nt(e)||nn(e))&&e.content)this._emit("functionCallResult",e.content);else if(ne(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(ne(e)&&e.tool_calls)for(let t of e.tool_calls)"function"===t.type&&this._emit("functionCall",t.function)}}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new O("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),nu(this,eo,"m",es).call(this)}async finalMessage(){return await this.done(),nu(this,eo,"m",ei).call(this)}async finalFunctionCall(){return await this.done(),nu(this,eo,"m",ea).call(this)}async finalFunctionCallResult(){return await this.done(),nu(this,eo,"m",el).call(this)}async totalUsage(){return await this.done(),nu(this,eo,"m",ec).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let t=nu(this,eo,"m",ei).call(this);t&&this._emit("finalMessage",t);let n=nu(this,eo,"m",es).call(this);n&&this._emit("finalContent",n);let r=nu(this,eo,"m",ea).call(this);r&&this._emit("finalFunctionCall",r);let o=nu(this,eo,"m",el).call(this);null!=o&&this._emit("finalFunctionCallResult",o),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",nu(this,eo,"m",ec).call(this))}async _createChatCompletion(e,t,n){let r=null==n?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),nu(this,eo,"m",eu).call(this,t);let o=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(nl(o,t))}async _runChatCompletion(e,t,n){for(let e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){let r="function",{function_call:o="auto",stream:s,...i}=t,a="string"!=typeof o&&(null==o?void 0:o.name),{maxChatCompletions:l=10}=n||{},c={};for(let e of t.functions)c[e.name||e.function.name]=e;let u=t.functions.map(e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description}));for(let e of t.messages)this._addMessage(e,!1);for(let t=0;t<l;++t){var d;let t;let s=null===(d=(await this._createChatCompletion(e,{...i,function_call:o,functions:u,messages:[...this.messages]},n)).choices[0])||void 0===d?void 0:d.message;if(!s)throw new O("missing message in ChatCompletion response");if(!s.function_call)return;let{name:l,arguments:h}=s.function_call,f=c[l];if(f){if(a&&a!==l){let e="Invalid function_call: ".concat(JSON.stringify(l),". ").concat(JSON.stringify(a)," requested. Please try again");this._addMessage({role:r,name:l,content:e});continue}}else{let e="Invalid function_call: ".concat(JSON.stringify(l),". Available options are: ").concat(u.map(e=>JSON.stringify(e.name)).join(", "),". Please try again");this._addMessage({role:r,name:l,content:e});continue}try{t=t9(f)?await f.parse(h):h}catch(e){this._addMessage({role:r,name:l,content:e instanceof Error?e.message:String(e)});continue}let p=await f.function(t,this),m=nu(this,eo,"m",ed).call(this,p);if(this._addMessage({role:r,name:l,content:m}),a)return}}async _runTools(e,t,n){var r,o,s;let i="tool",{tool_choice:a="auto",stream:l,...c}=t,u="string"!=typeof a&&(null==a?void 0:null===(r=a.function)||void 0===r?void 0:r.name),{maxChatCompletions:d=10}=n||{},h=t.tools.map(e=>{if(na(e)){if(!e.$callback)throw new O("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),f={};for(let e of h)"function"===e.type&&(f[e.function.name||e.function.function.name]=e.function);let p="tools"in t?h.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(let e of t.messages)this._addMessage(e,!1);for(let t=0;t<d;++t){let t=null===(o=(await this._createChatCompletion(e,{...c,tool_choice:a,tools:p,messages:[...this.messages]},n)).choices[0])||void 0===o?void 0:o.message;if(!t)throw new O("missing message in ChatCompletion response");if(!(null===(s=t.tool_calls)||void 0===s?void 0:s.length))break;for(let e of t.tool_calls){let t;if("function"!==e.type)continue;let n=e.id,{name:r,arguments:o}=e.function,s=f[r];if(s){if(u&&u!==r){let e="Invalid tool_call: ".concat(JSON.stringify(r),". ").concat(JSON.stringify(u)," requested. Please try again");this._addMessage({role:i,tool_call_id:n,content:e});continue}}else{let e="Invalid tool_call: ".concat(JSON.stringify(r),". Available options are: ").concat(Object.keys(f).map(e=>JSON.stringify(e)).join(", "),". Please try again");this._addMessage({role:i,tool_call_id:n,content:e});continue}try{t=t9(s)?await s.parse(o):o}catch(t){let e=t instanceof Error?t.message:String(t);this._addMessage({role:i,tool_call_id:n,content:e});continue}let a=await s.function(t,this),l=nu(this,eo,"m",ed).call(this,a);if(this._addMessage({role:i,tool_call_id:n,content:l}),u)return}}}constructor(){super(...arguments),eo.add(this),this._chatCompletions=[],this.messages=[]}}eo=new WeakSet,es=function(){var e;return null!==(e=nu(this,eo,"m",ei).call(this).content)&&void 0!==e?e:null},ei=function(){let e=this.messages.length;for(;e-- >0;){let r=this.messages[e];if(ne(r)){var t,n;let{function_call:e,...o}=r,s={...o,content:null!==(t=r.content)&&void 0!==t?t:null,refusal:null!==(n=r.refusal)&&void 0!==n?n:null};return e&&(s.function_call=e),s}}throw new O("stream ended without producing a ChatCompletionMessage with role=assistant")},ea=function(){for(let n=this.messages.length-1;n>=0;n--){var e,t;let r=this.messages[n];if(ne(r)&&(null==r?void 0:r.function_call))return r.function_call;if(ne(r)&&(null==r?void 0:null===(e=r.tool_calls)||void 0===e?void 0:e.length))return null===(t=r.tool_calls.at(-1))||void 0===t?void 0:t.function}},el=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(nt(t)&&null!=t.content||nn(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some(e=>{var n;return"assistant"===e.role&&(null===(n=e.tool_calls)||void 0===n?void 0:n.some(e=>"function"===e.type&&e.id===t.tool_call_id))}))return t.content}},ec=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},eu=function(e){if(null!=e.n&&e.n>1)throw new O("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},ed=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class nh extends nd{static runFunctions(e,t,n){let r=new nh,o={...n,headers:{...null==n?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,o)),r}static runTools(e,t,n){let r=new nh,o={...n,headers:{...null==n?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,o)),r}_addMessage(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];super._addMessage(e,t),ne(e)&&e.content&&this._emit("content",e.content)}}let nf={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,ALL:511};class np extends Error{}class nm extends Error{}let ng=(e,t)=>{let n=e.length,r=0,o=e=>{throw new np("".concat(e," at position ").concat(r))},s=e=>{throw new nm("".concat(e," at position ").concat(r))},i=()=>(d(),r>=n&&o("Unexpected end of input"),'"'===e[r])?a():"{"===e[r]?l():"["===e[r]?c():"null"===e.substring(r,r+4)||nf.NULL&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):"true"===e.substring(r,r+4)||nf.BOOL&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):"false"===e.substring(r,r+5)||nf.BOOL&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):"Infinity"===e.substring(r,r+8)||nf.INFINITY&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):"-Infinity"===e.substring(r,r+9)||nf.MINUS_INFINITY&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):"NaN"===e.substring(r,r+3)||nf.NAN&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):u(),a=()=>{let i=r,a=!1;for(r++;r<n&&('"'!==e[r]||a&&"\\"===e[r-1]);)a="\\"===e[r]&&!a,r++;if('"'==e.charAt(r))try{return JSON.parse(e.substring(i,++r-Number(a)))}catch(e){s(String(e))}else if(nf.STR&t)try{return JSON.parse(e.substring(i,r-Number(a))+'"')}catch(t){return JSON.parse(e.substring(i,e.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},l=()=>{r++,d();let s={};try{for(;"}"!==e[r];){if(d(),r>=n&&nf.OBJ&t)return s;let o=a();d(),r++;try{let e=i();Object.defineProperty(s,o,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(e){if(nf.OBJ&t)return s;throw e}d(),","===e[r]&&r++}}catch(e){if(nf.OBJ&t)return s;o("Expected '}' at end of object")}return r++,s},c=()=>{r++;let n=[];try{for(;"]"!==e[r];)n.push(i()),d(),","===e[r]&&r++}catch(e){if(nf.ARR&t)return n;o("Expected ']' at end of array")}return r++,n},u=()=>{if(0===r){"-"===e&&nf.NUM&t&&o("Not sure what '-' is");try{return JSON.parse(e)}catch(n){if(nf.NUM&t)try{if("."===e[e.length-1])return JSON.parse(e.substring(0,e.lastIndexOf(".")));return JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(e){}s(String(n))}}let i=r;for("-"===e[r]&&r++;e[r]&&!",]}".includes(e[r]);)r++;r!=n||nf.NUM&t||o("Unterminated number literal");try{return JSON.parse(e.substring(i,r))}catch(n){"-"===e.substring(i,r)&&nf.NUM&t&&o("Not sure what '-' is");try{return JSON.parse(e.substring(i,e.lastIndexOf("e")))}catch(e){s(String(e))}}},d=()=>{for(;r<n&&" \n\r	".includes(e[r]);)r++};return i()},nv=e=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nf.ALL;if("string"!=typeof e)throw TypeError("expecting str, got ".concat(typeof e));if(!e.trim())throw Error("".concat(e," is empty"));return ng(e.trim(),t)})(e,nf.ALL^nf.NUM);var ny=function(e,t,n,r,o){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},nw=function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class nb extends nd{get currentChatCompletionSnapshot(){return nw(this,em,"f")}static fromReadableStream(e){let t=new nb(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){let r=new nb(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...null==n?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,n){var r;super._createChatCompletion;let o=null==n?void 0:n.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),nw(this,eh,"m",eg).call(this);let s=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});for await(let e of(this._connected(),s))nw(this,eh,"m",ey).call(this,e);if(null===(r=s.controller.signal)||void 0===r?void 0:r.aborted)throw new M;return this._addChatCompletion(nw(this,eh,"m",e_).call(this))}async _fromReadableStream(e,t){var n;let r;let o=null==t?void 0:t.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),nw(this,eh,"m",eg).call(this),this._connected();let s=ez.fromReadableStream(e,this.controller);for await(let e of s)r&&r!==e.id&&this._addChatCompletion(nw(this,eh,"m",e_).call(this)),nw(this,eh,"m",ey).call(this,e),r=e.id;if(null===(n=s.controller.signal)||void 0===n?void 0:n.aborted)throw new M;return this._addChatCompletion(nw(this,eh,"m",e_).call(this))}[(ef=new WeakMap,ep=new WeakMap,em=new WeakMap,eh=new WeakSet,eg=function(){this.ended||ny(this,em,void 0,"f")},ev=function(e){let t=nw(this,ep,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},nw(this,ep,"f")[e.index]=t),t},ey=function(e){if(this.ended)return;let t=nw(this,eh,"m",ex).call(this,e);for(let E of(this._emit("chunk",e,t),e.choices)){var n,r,o,s,i,a,l,c,u,d,h,f,p,m,g,v,y,w,b,_;let e=t.choices[E.index];null!=E.delta.content&&(null===(n=e.message)||void 0===n?void 0:n.role)==="assistant"&&(null===(r=e.message)||void 0===r?void 0:r.content)&&(this._emit("content",E.delta.content,e.message.content),this._emit("content.delta",{delta:E.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=E.delta.refusal&&(null===(o=e.message)||void 0===o?void 0:o.role)==="assistant"&&(null===(s=e.message)||void 0===s?void 0:s.refusal)&&this._emit("refusal.delta",{delta:E.delta.refusal,snapshot:e.message.refusal}),(null===(i=E.logprobs)||void 0===i?void 0:i.content)!=null&&(null===(a=e.message)||void 0===a?void 0:a.role)==="assistant"&&this._emit("logprobs.content.delta",{content:null===(u=E.logprobs)||void 0===u?void 0:u.content,snapshot:null!==(h=null===(d=e.logprobs)||void 0===d?void 0:d.content)&&void 0!==h?h:[]}),(null===(l=E.logprobs)||void 0===l?void 0:l.refusal)!=null&&(null===(c=e.message)||void 0===c?void 0:c.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:null===(f=E.logprobs)||void 0===f?void 0:f.refusal,snapshot:null!==(m=null===(p=e.logprobs)||void 0===p?void 0:p.refusal)&&void 0!==m?m:[]});let x=nw(this,eh,"m",ev).call(this,e);for(let t of(e.finish_reason&&(nw(this,eh,"m",eb).call(this,e),null!=x.current_tool_call_index&&nw(this,eh,"m",ew).call(this,e,x.current_tool_call_index)),null!==(g=E.delta.tool_calls)&&void 0!==g?g:[]))x.current_tool_call_index!==t.index&&(nw(this,eh,"m",eb).call(this,e),null!=x.current_tool_call_index&&nw(this,eh,"m",ew).call(this,e,x.current_tool_call_index)),x.current_tool_call_index=t.index;for(let t of null!==(v=E.delta.tool_calls)&&void 0!==v?v:[]){let n=null===(y=e.message.tool_calls)||void 0===y?void 0:y[t.index];(null==n?void 0:n.type)&&((null==n?void 0:n.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:null===(w=n.function)||void 0===w?void 0:w.name,index:t.index,arguments:n.function.arguments,parsed_arguments:n.function.parsed_arguments,arguments_delta:null!==(_=null===(b=t.function)||void 0===b?void 0:b.arguments)&&void 0!==_?_:""}):null==n||n.type)}}},ew=function(e,t){var n,r,o;if(nw(this,eh,"m",ev).call(this,e).done_tool_calls.has(t))return;let s=null===(n=e.message.tool_calls)||void 0===n?void 0:n[t];if(!s)throw Error("no tool call snapshot");if(!s.type)throw Error("tool call snapshot missing `type`");if("function"===s.type){let e=null===(o=nw(this,ef,"f"))||void 0===o?void 0:null===(r=o.tools)||void 0===r?void 0:r.find(e=>"function"===e.type&&e.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:t,arguments:s.function.arguments,parsed_arguments:na(e)?e.$parseRaw(s.function.arguments):(null==e?void 0:e.function.strict)?JSON.parse(s.function.arguments):null})}else s.type},eb=function(e){var t,n;let r=nw(this,eh,"m",ev).call(this,e);if(e.message.content&&!r.content_done){r.content_done=!0;let t=nw(this,eh,"m",eE).call(this);this._emit("content.done",{content:e.message.content,parsed:t?t.$parseRaw(e.message.content):null})}e.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),(null===(t=e.logprobs)||void 0===t?void 0:t.content)&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),(null===(n=e.logprobs)||void 0===n?void 0:n.refusal)&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},e_=function(){if(this.ended)throw new O("stream has ended, this shouldn't happen");let e=nw(this,em,"f");if(!e)throw new O("request ended without sending any chunks");return ny(this,em,void 0,"f"),ny(this,ep,[],"f"),function(e,t){var n;let{id:r,choices:o,created:s,model:i,system_fingerprint:a,...l}=e;return n={...l,id:r,choices:o.map(t=>{var n,r,o;let{message:s,finish_reason:i,index:a,logprobs:l,...c}=t;if(!i)throw new O("missing finish_reason for choice ".concat(a));let{content:u=null,function_call:d,tool_calls:h,...f}=s,p=s.role;if(!p)throw new O("missing role for choice ".concat(a));if(d){let{arguments:e,name:t}=d;if(null==e)throw new O("missing function_call.arguments for choice ".concat(a));if(!t)throw new O("missing function_call.name for choice ".concat(a));return{...c,message:{content:u,function_call:{arguments:e,name:t},role:p,refusal:null!==(n=s.refusal)&&void 0!==n?n:null},finish_reason:i,index:a,logprobs:l}}return h?{...c,index:a,finish_reason:i,logprobs:l,message:{...f,role:p,content:u,refusal:null!==(r=s.refusal)&&void 0!==r?r:null,tool_calls:h.map((t,n)=>{let{function:r,type:o,id:s,...i}=t,{arguments:l,name:c,...u}=r||{};if(null==s)throw new O("missing choices[".concat(a,"].tool_calls[").concat(n,"].id\n").concat(n_(e)));if(null==o)throw new O("missing choices[".concat(a,"].tool_calls[").concat(n,"].type\n").concat(n_(e)));if(null==c)throw new O("missing choices[".concat(a,"].tool_calls[").concat(n,"].function.name\n").concat(n_(e)));if(null==l)throw new O("missing choices[".concat(a,"].tool_calls[").concat(n,"].function.arguments\n").concat(n_(e)));return{...i,id:s,type:o,function:{...u,name:c,arguments:l}}})}}:{...c,message:{...f,content:u,role:p,refusal:null!==(o=s.refusal)&&void 0!==o?o:null},finish_reason:i,index:a,logprobs:l}}),created:s,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}},t&&nc(t)?nl(n,t):{...n,choices:n.choices.map(e=>{var t;return{...e,message:{...e.message,parsed:null,tool_calls:null!==(t=e.message.tool_calls)&&void 0!==t?t:[]}}})}}(e,nw(this,ef,"f"))},eE=function(){var e;let t=null===(e=nw(this,ef,"f"))||void 0===e?void 0:e.response_format;return ni(t)?t:null},ex=function(e){var t,n,r,o,s,i,a,l,c,u;let d=nw(this,em,"f"),{choices:h,...f}=e;for(let{delta:h,finish_reason:p,index:m,logprobs:g=null,...v}of(d?Object.assign(d,f):d=ny(this,em,{...f,choices:[]},"f"),e.choices)){let e=d.choices[m];if(e||(e=d.choices[m]={finish_reason:p,index:m,message:{},logprobs:g,...v}),g){if(e.logprobs){let{content:r,refusal:o,...a}=g;Object.assign(e.logprobs,a),r&&(null!==(s=(t=e.logprobs).content)&&void 0!==s||(t.content=[]),e.logprobs.content.push(...r)),o&&(null!==(i=(n=e.logprobs).refusal)&&void 0!==i||(n.refusal=[]),e.logprobs.refusal.push(...o))}else e.logprobs=Object.assign({},g)}if(p&&(e.finish_reason=p,nw(this,ef,"f")&&nc(nw(this,ef,"f")))){if("length"===p)throw new W;if("content_filter"===p)throw new q}if(Object.assign(e,v),!h)continue;let{content:f,refusal:y,function_call:w,role:b,tool_calls:_,...E}=h;if(Object.assign(e.message,E),y&&(e.message.refusal=(e.message.refusal||"")+y),b&&(e.message.role=b),w&&(e.message.function_call?(w.name&&(e.message.function_call.name=w.name),w.arguments&&(null!==(a=(r=e.message.function_call).arguments)&&void 0!==a||(r.arguments=""),e.message.function_call.arguments+=w.arguments)):e.message.function_call=w),f&&(e.message.content=(e.message.content||"")+f,!e.message.refusal&&nw(this,eh,"m",eE).call(this)&&(e.message.parsed=nv(e.message.content))),_)for(let{index:t,id:n,type:r,function:s,...i}of(e.message.tool_calls||(e.message.tool_calls=[]),_)){let a=null!==(l=(o=e.message.tool_calls)[t])&&void 0!==l?l:o[t]={};Object.assign(a,i),n&&(a.id=n),r&&(a.type=r),s&&(null!==(u=a.function)&&void 0!==u||(a.function={name:null!==(c=s.name)&&void 0!==c?c:"",arguments:""})),(null==s?void 0:s.name)&&(a.function.name=s.name),(null==s?void 0:s.arguments)&&(a.function.arguments+=s.arguments,function(e,t){var n;if(!e)return!1;let r=null===(n=e.tools)||void 0===n?void 0:n.find(e=>{var n;return(null===(n=e.function)||void 0===n?void 0:n.name)===t.function.name});return na(r)||(null==r?void 0:r.function.strict)||!1}(nw(this,ef,"f"),a)&&(a.function.parsed_arguments=nv(a.function.arguments)))}}return d},Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on("chunk",n=>{let r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{for(let e of(n=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let r of(n=!0,t))r.reject(e);t.length=0}),this.on("error",e=>{for(let r of(n=!0,t))r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ez(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}constructor(e){super(),eh.add(this),ef.set(this,void 0),ep.set(this,void 0),em.set(this,void 0),ny(this,ef,e,"f"),ny(this,ep,[],"f")}}function n_(e){return JSON.stringify(e)}class nE extends nb{static fromReadableStream(e){let t=new nE(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,n){let r=new nE(null),o={...n,headers:{...null==n?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,o)),r}static runTools(e,t,n){let r=new nE(t),o={...n,headers:{...null==n?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,o)),r}}class nx extends tL{parse(e,t){return!function(e){for(let t of null!=e?e:[]){if("function"!==t.type)throw new O("Currently only `function` tool types support auto-parsing; Received `".concat(t.type,"`"));if(!0!==t.function.strict)throw new O("The `".concat(t.function.name,"` tool is not marked with `strict: true`. Only strict function tools can be auto-parsed"))}}(e.tools),this._client.chat.completions.create(e,{...t,headers:{...null==t?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(t=>nl(t,e))}runFunctions(e,t){return e.stream?nE.runFunctions(this._client,e,t):nh.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?nE.runTools(this._client,e,t):nh.runTools(this._client,e,t)}stream(e,t){return nb.createChatCompletion(this._client,e,t)}}class nS extends tL{constructor(){super(...arguments),this.completions=new nx(this._client)}}(nS||(nS={})).Completions=nx;var nC=function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},nA=function(e,t,n,r,o){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};class nI extends ns{[(eC=new WeakMap,eA=new WeakMap,eI=new WeakMap,eR=new WeakMap,eO=new WeakMap,eT=new WeakMap,eM=new WeakMap,ek=new WeakMap,eP=new WeakMap,eN=new WeakMap,ej=new WeakMap,eB=new WeakMap,eS=new WeakSet,Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on("event",n=>{let r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{for(let e of(n=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let r of(n=!0,t))r.reject(e);t.length=0}),this.on("error",e=>{for(let r of(n=!0,t))r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){let t=new nI;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var n;let r=null==t?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();let o=ez.fromReadableStream(e,this.controller);for await(let e of o)nC(this,eS,"m",eD).call(this,e);if(null===(n=o.controller.signal)||void 0===n?void 0:n.aborted)throw new M;return this._addRun(nC(this,eS,"m",eL).call(this))}toReadableStream(){return new ez(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r,o){let s=new nI;return s._run(()=>s._runToolAssistantStream(e,t,n,r,{...o,headers:{...null==o?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,t,n,r,o){var s;let i=null==o?void 0:o.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let a={...r,stream:!0},l=await e.submitToolOutputs(t,n,a,{...o,signal:this.controller.signal});for await(let e of(this._connected(),l))nC(this,eS,"m",eD).call(this,e);if(null===(s=l.controller.signal)||void 0===s?void 0:s.aborted)throw new M;return this._addRun(nC(this,eS,"m",eL).call(this))}static createThreadAssistantStream(e,t,n){let r=new nI;return r._run(()=>r._threadAssistantStream(e,t,{...n,headers:{...null==n?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,n,r){let o=new nI;return o._run(()=>o._runAssistantStream(e,t,n,{...r,headers:{...null==r?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return nC(this,eN,"f")}currentRun(){return nC(this,ej,"f")}currentMessageSnapshot(){return nC(this,eR,"f")}currentRunStepSnapshot(){return nC(this,eB,"f")}async finalRunSteps(){return await this.done(),Object.values(nC(this,eA,"f"))}async finalMessages(){return await this.done(),Object.values(nC(this,eI,"f"))}async finalRun(){if(await this.done(),!nC(this,eO,"f"))throw Error("Final run was not received.");return nC(this,eO,"f")}async _createThreadAssistantStream(e,t,n){var r;let o=null==n?void 0:n.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));let s={...t,stream:!0},i=await e.createAndRun(s,{...n,signal:this.controller.signal});for await(let e of(this._connected(),i))nC(this,eS,"m",eD).call(this,e);if(null===(r=i.controller.signal)||void 0===r?void 0:r.aborted)throw new M;return this._addRun(nC(this,eS,"m",eL).call(this))}async _createAssistantStream(e,t,n,r){var o;let s=null==r?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));let i={...n,stream:!0},a=await e.create(t,i,{...r,signal:this.controller.signal});for await(let e of(this._connected(),a))nC(this,eS,"m",eD).call(this,e);if(null===(o=a.controller.signal)||void 0===o?void 0:o.aborted)throw new M;return this._addRun(nC(this,eS,"m",eL).call(this))}static accumulateDelta(e,t){for(let[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let t=e[n];if(null==t||"index"===n||"type"===n){e[n]=r;continue}if("string"==typeof t&&"string"==typeof r)t+=r;else if("number"==typeof t&&"number"==typeof r)t+=r;else if(tD(t)&&tD(r))t=this.accumulateDelta(t,r);else if(Array.isArray(t)&&Array.isArray(r)){if(t.every(e=>"string"==typeof e||"number"==typeof e)){t.push(...r);continue}for(let e of r){if(!tD(e))throw Error("Expected array delta entry to be an object but got: ".concat(e));let n=e.index;if(null==n)throw console.error(e),Error("Expected array delta entry to have an `index` property");if("number"!=typeof n)throw Error("Expected array delta entry `index` property to be a number but got ".concat(n));let r=t[n];null==r?t.push(e):t[n]=this.accumulateDelta(r,e)}continue}else throw Error("Unhandled record type: ".concat(n,", deltaValue: ").concat(r,", accValue: ").concat(t));e[n]=t}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,o){return await this._createToolAssistantStream(n,e,t,r,o)}constructor(){super(...arguments),eS.add(this),eC.set(this,[]),eA.set(this,{}),eI.set(this,{}),eR.set(this,void 0),eO.set(this,void 0),eT.set(this,void 0),eM.set(this,void 0),ek.set(this,void 0),eP.set(this,void 0),eN.set(this,void 0),ej.set(this,void 0),eB.set(this,void 0)}}eD=function(e){if(!this.ended)switch(nA(this,eN,e,"f"),nC(this,eS,"m",eH).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":nC(this,eS,"m",eK).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":nC(this,eS,"m",eU).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":nC(this,eS,"m",eF).call(this,e);break;case"error":throw Error("Encountered an error event in event processing - errors should be processed earlier")}},eL=function(){if(this.ended)throw new O("stream has ended, this shouldn't happen");if(!nC(this,eO,"f"))throw Error("Final run has not been received");return nC(this,eO,"f")},eF=function(e){let[t,n]=nC(this,eS,"m",eq).call(this,e,nC(this,eR,"f"));for(let e of(nA(this,eR,t,"f"),nC(this,eI,"f")[t.id]=t,n)){let n=t.content[e.index];(null==n?void 0:n.type)=="text"&&this._emit("textCreated",n.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(let n of e.data.delta.content){if("text"==n.type&&n.text){let e=n.text,r=t.content[n.index];if(r&&"text"==r.type)this._emit("textDelta",e,r.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(n.index!=nC(this,eT,"f")){if(nC(this,eM,"f"))switch(nC(this,eM,"f").type){case"text":this._emit("textDone",nC(this,eM,"f").text,nC(this,eR,"f"));break;case"image_file":this._emit("imageFileDone",nC(this,eM,"f").image_file,nC(this,eR,"f"))}nA(this,eT,n.index,"f")}nA(this,eM,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==nC(this,eT,"f")){let t=e.data.content[nC(this,eT,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,nC(this,eR,"f"));break;case"text":this._emit("textDone",t.text,nC(this,eR,"f"))}}nC(this,eR,"f")&&this._emit("messageDone",e.data),nA(this,eR,void 0,"f")}},eU=function(e){let t=nC(this,eS,"m",eW).call(this,e);switch(nA(this,eB,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let n=e.data.delta;if(n.step_details&&"tool_calls"==n.step_details.type&&n.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(let e of n.step_details.tool_calls)e.index==nC(this,ek,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(nC(this,eP,"f")&&this._emit("toolCallDone",nC(this,eP,"f")),nA(this,ek,e.index,"f"),nA(this,eP,t.step_details.tool_calls[e.index],"f"),nC(this,eP,"f")&&this._emit("toolCallCreated",nC(this,eP,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":nA(this,eB,void 0,"f"),"tool_calls"==e.data.step_details.type&&nC(this,eP,"f")&&(this._emit("toolCallDone",nC(this,eP,"f")),nA(this,eP,void 0,"f")),this._emit("runStepDone",e.data,t)}},eH=function(e){nC(this,eC,"f").push(e),this._emit("event",e)},eW=function(e){switch(e.event){case"thread.run.step.created":return nC(this,eA,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=nC(this,eA,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){let r=nI.accumulateDelta(t,n.delta);nC(this,eA,"f")[e.data.id]=r}return nC(this,eA,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":nC(this,eA,"f")[e.data.id]=e.data}if(nC(this,eA,"f")[e.data.id])return nC(this,eA,"f")[e.data.id];throw Error("No snapshot available")},eq=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(let e of r.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=nC(this,eS,"m",eV).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},eV=function(e,t){return nI.accumulateDelta(t,e)},eK=function(e){switch(nA(this,ej,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":nA(this,eO,e.data,"f"),nC(this,eP,"f")&&(this._emit("toolCallDone",nC(this,eP,"f")),nA(this,eP,void 0,"f"))}};class nR extends tL{create(e,t,n){return this._client.post("/threads/".concat(e,"/messages"),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}retrieve(e,t,n){return this._client.get("/threads/".concat(e,"/messages/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}update(e,t,n,r){return this._client.post("/threads/".concat(e,"/messages/").concat(t),{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null==r?void 0:r.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return tv(t)?this.list(e,{},t):this._client.getAPIList("/threads/".concat(e,"/messages"),nO,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}del(e,t,n){return this._client.delete("/threads/".concat(e,"/messages/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}}class nO extends tV{}nR.MessagesPage=nO;class nT extends tL{retrieve(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0;return tv(r)?this.retrieve(e,t,n,{},r):this._client.get("/threads/".concat(e,"/runs/").concat(t,"/steps/").concat(n),{query:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...null==o?void 0:o.headers}})}list(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return tv(n)?this.list(e,t,{},n):this._client.getAPIList("/threads/".concat(e,"/runs/").concat(t,"/steps"),nM,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null==r?void 0:r.headers}})}}class nM extends tV{}nT.RunStepsPage=nM;class nk extends tL{create(e,t,n){var r;let{include:o,...s}=t;return this._client.post("/threads/".concat(e,"/runs"),{query:{include:o},body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers},stream:null!==(r=t.stream)&&void 0!==r&&r})}retrieve(e,t,n){return this._client.get("/threads/".concat(e,"/runs/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}update(e,t,n,r){return this._client.post("/threads/".concat(e,"/runs/").concat(t),{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null==r?void 0:r.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return tv(t)?this.list(e,{},t):this._client.getAPIList("/threads/".concat(e,"/runs"),nP,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}cancel(e,t,n){return this._client.post("/threads/".concat(e,"/runs/").concat(t,"/cancel"),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}async createAndPoll(e,t,n){let r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return nI.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){let r={...null==n?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for((null==n?void 0:n.pollIntervalMs)&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){let{data:o,response:s}=await this.retrieve(e,t,{...n,headers:{...null==n?void 0:n.headers,...r}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let i=5e3;if(null==n?void 0:n.pollIntervalMs)i=n.pollIntervalMs;else{let e=s.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(i=t)}}await tC(i);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,t,n){return nI.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){var o;return this._client.post("/threads/".concat(e,"/runs/").concat(t,"/submit_tool_outputs"),{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null==r?void 0:r.headers},stream:null!==(o=n.stream)&&void 0!==o&&o})}async submitToolOutputsAndPoll(e,t,n,r){let o=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,o.id,r)}submitToolOutputsStream(e,t,n,r){return nI.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}constructor(){super(...arguments),this.steps=new nT(this._client)}}class nP extends tV{}nk.RunsPage=nP,nk.Steps=nT,nk.RunStepsPage=nM;class nN extends tL{create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return tv(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}retrieve(e,t){return this._client.get("/threads/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}update(e,t,n){return this._client.post("/threads/".concat(e),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}del(e,t){return this._client.delete("/threads/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}createAndRun(e,t){var n;return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers},stream:null!==(n=e.stream)&&void 0!==n&&n})}async createAndRunPoll(e,t){let n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return nI.createThreadAssistantStream(e,this._client.beta.threads,t)}constructor(){super(...arguments),this.runs=new nk(this._client),this.messages=new nR(this._client)}}nN.Runs=nk,nN.RunsPage=nP,nN.Messages=nR,nN.MessagesPage=nO;let nj=async e=>{let t=await Promise.allSettled(e),n=t.filter(e=>"rejected"===e.status);if(n.length){for(let e of n)console.error(e.reason);throw Error("".concat(n.length," promise(s) failed - see the above errors"))}let r=[];for(let e of t)"fulfilled"===e.status&&r.push(e.value);return r};class nB extends tL{create(e,t,n){return this._client.post("/vector_stores/".concat(e,"/files"),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}retrieve(e,t,n){return this._client.get("/vector_stores/".concat(e,"/files/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return tv(t)?this.list(e,{},t):this._client.getAPIList("/vector_stores/".concat(e,"/files"),nD,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}del(e,t,n){return this._client.delete("/vector_stores/".concat(e,"/files/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}async createAndPoll(e,t,n){let r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){let r={...null==n?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for((null==n?void 0:n.pollIntervalMs)&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){let o=await this.retrieve(e,t,{...n,headers:r}).withResponse(),s=o.data;switch(s.status){case"in_progress":let i=5e3;if(null==n?void 0:n.pollIntervalMs)i=n.pollIntervalMs;else{let e=o.response.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(i=t)}}await tC(i);break;case"failed":case"completed":return s}}}async upload(e,t,n){let r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){let r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}}class nD extends tV{}nB.VectorStoreFilesPage=nD;class nL extends tL{create(e,t,n){return this._client.post("/vector_stores/".concat(e,"/file_batches"),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}retrieve(e,t,n){return this._client.get("/vector_stores/".concat(e,"/file_batches/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}cancel(e,t,n){return this._client.post("/vector_stores/".concat(e,"/file_batches/").concat(t,"/cancel"),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}async createAndPoll(e,t,n){let r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return tv(n)?this.listFiles(e,t,{},n):this._client.getAPIList("/vector_stores/".concat(e,"/file_batches/").concat(t,"/files"),nD,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null==r?void 0:r.headers}})}async poll(e,t,n){let r={...null==n?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for((null==n?void 0:n.pollIntervalMs)&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){let{data:o,response:s}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(o.status){case"in_progress":let i=5e3;if(null==n?void 0:n.pollIntervalMs)i=n.pollIntervalMs;else{let e=s.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(i=t)}}await tC(i);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,t,n){var r;let{files:o,fileIds:s=[]}=t;if(null==o||0==o.length)throw Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let i=Math.min(null!==(r=null==n?void 0:n.maxConcurrency)&&void 0!==r?r:5,o.length),a=this._client,l=o.values(),c=[...s];async function u(e){for(let t of e){let e=await a.files.create({file:t,purpose:"assistants"},n);c.push(e.id)}}let d=Array(i).fill(l).map(u);return await nj(d),await this.createAndPoll(e,{file_ids:c})}}class nF extends tL{create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}retrieve(e,t){return this._client.get("/vector_stores/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}update(e,t,n){return this._client.post("/vector_stores/".concat(e),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return tv(e)?this.list({},e):this._client.getAPIList("/vector_stores",nU,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}del(e,t){return this._client.delete("/vector_stores/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}constructor(){super(...arguments),this.files=new nB(this._client),this.fileBatches=new nL(this._client)}}class nU extends tV{}nF.VectorStoresPage=nU,nF.Files=nB,nF.VectorStoreFilesPage=nD,nF.FileBatches=nL;class nH extends tL{constructor(){super(...arguments),this.vectorStores=new nF(this._client),this.chat=new nS(this._client),this.assistants=new t3(this._client),this.threads=new nN(this._client)}}nH.VectorStores=nF,nH.VectorStoresPage=nU,nH.Assistants=t3,nH.AssistantsPage=t7,nH.Threads=nN;class nW extends tL{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get("/batches/".concat(e),t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return tv(e)?this.list({},e):this._client.getAPIList("/batches",nq,{query:e,...t})}cancel(e,t){return this._client.post("/batches/".concat(e,"/cancel"),t)}}class nq extends tV{}nW.BatchesPage=nq;class nV extends tL{create(e,t,n){return this._client.post("/uploads/".concat(e,"/parts"),tt({body:t,...n}))}}class nK extends tL{create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post("/uploads/".concat(e,"/cancel"),t)}complete(e,t,n){return this._client.post("/uploads/".concat(e,"/complete"),{body:t,...n})}constructor(){super(...arguments),this.parts=new nV(this._client)}}nK.Parts=nV,n(49079);class nG extends th{defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:"Bearer ".concat(this.apiKey)}}stringifyQuery(e){return function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e,o=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.encodeDotInKeys&&"boolean"!=typeof t.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw TypeError("Encoder has to be a function.");let n=t.charset||S.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=f;if(void 0!==t.format){if(!y.call(p,t.format))throw TypeError("Unknown format option provided.");r=t.format}let o=p[r],s=S.filter;if(("function"==typeof t.filter||b(t.filter))&&(s=t.filter),e=t.arrayFormat&&t.arrayFormat in w?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":S.arrayFormat,"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");let i=void 0===t.allowDots?!0==!!t.encodeDotInKeys||S.allowDots:!!t.allowDots;return{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:S.addQueryPrefix,allowDots:i,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:S.allowEmptyArrays,arrayFormat:e,charset:n,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:S.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:void 0===t.delimiter?S.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:S.encode,encodeDotInKeys:"boolean"==typeof t.encodeDotInKeys?t.encodeDotInKeys:S.encodeDotInKeys,encoder:"function"==typeof t.encoder?t.encoder:S.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:S.encodeValuesOnly,filter:s,format:r,formatter:o,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:S.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:S.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:S.strictNullHandling}}(n);"function"==typeof o.filter?r=(0,o.filter)("",r):b(o.filter)&&(t=o.filter);let s=[];if("object"!=typeof r||null===r)return"";let i=w[o.arrayFormat],a="comma"===i&&o.commaRoundTrip;t||(t=Object.keys(r)),o.sort&&t.sort(o.sort);let l=new WeakMap;for(let e=0;e<t.length;++e){let n=t[e];o.skipNulls&&null===r[n]||E(s,function e(t,n,r,o,s,i,a,l,c,u,d,h,f,p,m,g,y,w){var _,x;let A,I=t,R=w,O=0,T=!1;for(;void 0!==(R=R.get(C))&&!T;){let e=R.get(t);if(O+=1,void 0!==e){if(e===O)throw RangeError("Cyclic object value");T=!0}void 0===R.get(C)&&(O=0)}if("function"==typeof u?I=u(n,I):I instanceof Date?I=null==f?void 0:f(I):"comma"===r&&b(I)&&(I=v(I,function(e){return e instanceof Date?null==f?void 0:f(e):e})),null===I){if(i)return c&&!g?c(n,S.encoder,y,"key",p):n;I=""}if("string"==typeof(_=I)||"number"==typeof _||"boolean"==typeof _||"symbol"==typeof _||"bigint"==typeof _||(x=I)&&"object"==typeof x&&x.constructor&&x.constructor.isBuffer&&x.constructor.isBuffer(x)){if(c){let e=g?n:c(n,S.encoder,y,"key",p);return[(null==m?void 0:m(e))+"="+(null==m?void 0:m(c(I,S.encoder,y,"value",p)))]}return[(null==m?void 0:m(n))+"="+(null==m?void 0:m(String(I)))]}let M=[];if(void 0===I)return M;if("comma"===r&&b(I))g&&c&&(I=v(I,c)),A=[{value:I.length>0?I.join(",")||null:void 0}];else if(b(u))A=u;else{let e=Object.keys(I);A=d?e.sort(d):e}let k=l?String(n).replace(/\./g,"%2E"):String(n),P=o&&b(I)&&1===I.length?k+"[]":k;if(s&&b(I)&&0===I.length)return P+"[]";for(let n=0;n<A.length;++n){let v=A[n],_="object"==typeof v&&void 0!==v.value?v.value:I[v];if(a&&null===_)continue;let x=h&&l?v.replace(/\./g,"%2E"):v,S=b(I)?"function"==typeof r?r(P,x):P:P+(h?"."+x:"["+x+"]");w.set(t,O);let R=new WeakMap;R.set(C,w),E(M,e(_,S,r,o,s,i,a,l,"comma"===r&&g&&b(I)?null:c,u,d,h,f,p,m,g,y,R))}return M}(r[n],n,i,a,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,l))}let c=s.join(o.delimiter),u=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?u+="utf8=%26%2310003%3B&":u+="utf8=%E2%9C%93&"),c.length>0?u+c:""}(e,{arrayFormat:"brackets"})}constructor({baseURL:e=tR("OPENAI_BASE_URL"),apiKey:t=tR("OPENAI_API_KEY"),organization:n=null!==(eG=tR("OPENAI_ORG_ID"))&&void 0!==eG?eG:null,project:r=null!==(eJ=tR("OPENAI_PROJECT_ID"))&&void 0!==eJ?eJ:null,...o}={}){var s;if(void 0===t)throw new O("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");let i={apiKey:t,organization:n,project:r,...o,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&tN())throw new O("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:i.baseURL,timeout:null!==(s=i.timeout)&&void 0!==s?s:6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new tF(this),this.chat=new tH(this),this.embeddings=new tW(this),this.files=new tK(this),this.images=new tJ(this),this.audio=new tZ(this),this.moderations=new tQ(this),this.models=new t$(this),this.fineTuning=new t4(this),this.beta=new nH(this),this.batches=new nW(this),this.uploads=new nK(this),this._options=i,this.apiKey=t,this.organization=n,this.project=r}}nG.OpenAI=nG,nG.DEFAULT_TIMEOUT=6e5,nG.OpenAIError=O,nG.APIError=T,nG.APIConnectionError=k,nG.APIConnectionTimeoutError=P,nG.APIUserAbortError=M,nG.NotFoundError=D,nG.ConflictError=L,nG.RateLimitError=U,nG.BadRequestError=N,nG.AuthenticationError=j,nG.InternalServerError=H,nG.PermissionDeniedError=B,nG.UnprocessableEntityError=F,nG.toFile=e4,nG.fileFromPath=d,nG.Completions=tF,nG.Chat=tH,nG.Embeddings=tW,nG.Files=tK,nG.FileObjectsPage=tG,nG.Images=tJ,nG.Audio=tZ,nG.Moderations=tQ,nG.Models=t$,nG.ModelsPage=t0,nG.FineTuning=t4,nG.Beta=nH,nG.Batches=nW,nG.BatchesPage=nq,nG.Uploads=nK;var nJ=nG}}]);